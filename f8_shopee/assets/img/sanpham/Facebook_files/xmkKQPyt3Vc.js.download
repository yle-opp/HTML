if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }

__d("MessengerFormattingConfig",[],(function(a,b,c,d,e,f){e.exports={boldConfig:{pattern:"([\\s_~'\"(]|^)\\*(\\S(?:.*?\\S)??)\\*(?=[\\s_~,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s_~'\"(]|^)\\*(?:\\S(?:.*?\\S)??)\\*(?=[\\s_~,.;:!?'\")]|$)"},italicConfig:{pattern:"([\\s*~'\"(]|^)_(\\S(?:.*?\\S)??)_(?=[\\s*~,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s*~'\"(]|^)_(?:\\S(?:.*?\\S)??)_(?=[\\s*~,.;:!?'\")]|$)"},strikethroughConfig:{pattern:"([\\s*_'\"(]|^)~(\\S(?:.*?\\S)??)~(?=[\\s*_,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s*_'\"(]|^)~(?:\\S(?:.*?\\S)??)~(?=[\\s*_,.;:!?'\")]|$)"},codeConfig:{pattern:"([\\s*_~'\"(]|^)`([^`\\r\\n](?:.*?[^`\\r\\n])??)`(?=[\\s\\w*_~,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s*_~'\"(]|^)`(?:[^`\\r\\n](?:.*?[^`\\r\\n])??)`(?=[\\s\\w*_~,.;:!?'\")]|$)"},codeBlockConfig:{pattern:"(```)([\\s\\S]+?)```",nonCapturingPattern:"(```)([\\s\\S]+?)```"},codeBlockV2Config:{pattern:"(`{3,})(?:(?:((.*?)(?:\\r\\n?|\\n))([\\s\\S]*?))|(.+?))\\1\\s*?(?:\\r\\n?|\\n|$)",nonCapturingPattern:"(`{3,})([\\s\\S]+?)\\1\\s*((\\r\\n)|\\r|\\n|$)"},blockQuoteConfig:{pattern:"(^>>> ?)((.|(\\r\\n)|\\r|\\n)*?\\S(.|(\\r\\n)|\\r|\\n)*?)^<<<\\s*?((\\r\\n)|\\r|\\n|$)",nonCapturingPattern:"(^>>> ?)((.|(\\r\\n)|\\r|\\n)*?\\S(.|(\\r\\n)|\\r|\\n)*?)^<<<\\s*((\\r\\n)|\\r|\\n|$)"},multipleInlineBlockQuoteConfig:{pattern:"((^> )(.*\\S.*)((\\r\\n)|\\r|\\n)?)(^> ?(.*)((\\r\\n)|\\r|\\n)?)*",nonCapturingPattern:"(^> (.*\\S.*)((\\r\\n)|\\r|\\n)?)(^> ?(.*)((\\r\\n)|\\r|\\n)?)*"},singleInlineBlockQuoteConfig:{pattern:"(^> ?)(.*?$)",nonCapturingPattern:"^> ?(.*?$)"}}}),null);
__d("LSAddMessengerContact",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("contact_id",a[0]),d[1]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),"add_messenger_contact",[0,308],d[1],f,f,[0,0],f)},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSIssueSendAttachmentMessageTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSIssueNewTaskAndGetTaskID","LSPredefineTraceForTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=c.i64.of_int32(a[5].length),c.i64.gt(d[0],[0,0])?c.loopAsync(d[0],function(e){return d[4]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[5],d[4]).then(function(a){return a=a,d[5]=a[0],d[6]=a[1],a})},function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[1],a[3]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[3]&&c.i64.eq(b.attachmentIndex,d[4])&&c.i64.eq(b.authorityLevel,[0,20])}),function(a){var b=a.update;a.item;return b({attachmentFbid:c.i64.to_string(d[5])})})}])}):c.resolve()},function(e){return c.i64.eq(f,[0,12])?d[1]=[0,10]:(a[9]?d[4]=[0,9]:d[4]=[0,3],d[1]=d[4]),c.i64.gt([0,0],[0,0])?d[2]=c.i64.add(c.i64.of_float(Date.now()),[0,0]):d[2]=[0,0],c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[1]),[0,46],"",f,f,[0,0],f).then(function(a){return a=a,d[3]=a[0],a})},function(e){return a[12]!==f?c.seq([function(e){return c.sp(b("LSPredefineTraceForTask"),a[12],d[3],c.i64.to_string([0,46]),a[3])},function(d){return c.sp(b("LSAppendDataTraceAddon"),a[12],[0,20],[0,1],f,f)}]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[3],threadKey:a[1],offlineThreadingId:a[3],threadAttributionSource:a[6],platformRef:a[10],platformToken:a[11],replySourceId:a[7],replySourceType:a[8],sendType:d[1],markThreadRead:!1})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSLocalApplyOptimisticMessageWithAttachments",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticMessage"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],f,a[7],a[8],a[9],f,f,!0).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[2]=c.i64.of_int32(a[10].length),c.i64.gt(d[2],[0,0])?c.loopAsync(d[2],function(e){return d[3]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[10],d[3]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(b){return d[6]=d[4].get("attachment_fbid"),d[4],d[7]=d[4].get("offline_attachment_id"),d[4],d[8]=d[4].get("attachment_type"),d[4],d[9]=d[4].get("filename"),d[4],d[10]=d[4].get("filesize"),d[4],d[11]=d[4].get("attachment_index"),d[4],d[12]=d[4].get("has_media"),d[4],d[13]=d[4].get("has_xma"),d[4],d[14]=d[4].get("playable_url"),d[4],d[15]=d[4].get("playable_url_mime_type"),d[4],d[16]=d[4].get("playable_duration_ms"),d[4],d[17]=d[4].get("preview_url"),d[4],d[18]=d[4].get("preview_url_mime_type"),d[4],d[19]=d[4].get("mini_preview"),d[4],d[20]=d[4].get("preview_width"),d[4],d[21]=d[4].get("preview_height"),d[4],d[22]=d[4].get("xma_layout_type"),d[4],d[23]=d[4].get("xmas_template_type"),d[4],d[24]=d[4].get("cta1_title"),d[4],d[25]=d[4].get("cta2_title"),d[4],d[26]=d[4].get("cta3_title"),d[4],d[27]=d[4].get("image_url"),d[4],d[28]=d[4].get("action_url"),d[4],d[29]=d[4].get("title_text"),d[4],d[30]=d[4].get("subtitle_text"),d[4],d[31]=d[4].get("description_text"),d[4],d[32]=d[4].get("source_text"),d[4],d[33]=d[4].get("original_file_hash"),d[4],d[34]=d[4].get("sound_bite_client_sound_key"),d[4],d[35]=d[4].get("sound_bite_visual"),d[4],d[36]=d[4].get("ephemeral_media_state"),d[4],c.ftr(c.db.table(16).fetch([[[a[1],d[0],d[6]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&b.messageId===d[0]&&b.attachmentFbid===d[6]&&c.i64.gt(b.authorityLevel,[0,20])}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[1],messageId:d[0],attachmentFbid:d[6],timestampMs:d[1],offlineAttachmentId:d[7],attachmentType:d[8],filename:d[9],filesize:d[10],attachmentIndex:d[11],hasMedia:d[12],hasXma:d[13],isSharable:!1,playableUrl:d[14],playableUrlMimeType:d[15],playableDurationMs:d[16],previewUrl:d[17],previewUrlMimeType:d[18],miniPreview:d[19],previewWidth:d[20],previewHeight:d[21],xmaLayoutType:d[22],xmasTemplateType:d[23],cta1Title:d[24],cta2Title:d[25],cta3Title:d[26],imageUrl:d[27],actionUrl:d[28],titleText:d[29],subtitleText:d[30],descriptionText:d[31],sourceText:d[32],ephemeralMediaState:d[36],originalFileHash:d[33],authorityLevel:[0,20]}):0})}])}):c.resolve()},function(e){return d[2]=c.i64.of_int32(a[10].length),c.i64.gt(d[2],[0,0])?c.sp(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[1],a[3],!1,c.i64.neq(a[6],f)):c.resolve()},function(a){return a=[d[0],d[1]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateDraftMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.fe(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({draftMessage:a[1]===""||a[1]===d?d:a[1]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSGetMessageAttributionParams",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.ftr(b.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[e,e,e],c[0]=d[0],c[1]=d[1],c[2]=d[2],d):(b=a.item,d=[b.threadAttributionSource,b.platformRef,b.platformToken],c[0]=d[0],c[1]=d[1],c[2]=d[2],d)})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSInsertNewMediaSend",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.db.table(51).add({offlineAttachmentId:a[0],offlineThreadingId:a[1],inMessageIndex:a[2],attachmentType:a[3],shouldTranscode:a[4],useDoublePhase:a[5],sendByServer:a[6],isSecure:a[7],state:a[4]?[0,1]:[0,3]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSInsertPhase2PendingTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=e:(b=a.item,c[0]=b.threadKey)})},function(d){return b.i64.neq(c[0],e)?b.seq([function(d){return b.db.table(2).add({taskId:void 0,taskValue:a[0],queueName:[b.i64.to_string(c[0]),"_multi_media"].join(""),context:"4",enqueueTimestampMs:b.i64.of_float(Date.now()),pluginType:a[1]})},function(a){return c[2]=e}]):b.resolve(c[2]=[0,1002])},function(a){return d[0]=c[2]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSMarkSubJobCompletedV2",["LSArrayGetObjectAt"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return d[0]=c.createArray(),c.db.table(51).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[3]=new c.Map(),d[3].set("offline_attachment_id",b.offlineAttachmentId),d[3].set("offline_threading_id",b.offlineThreadingId),d[3].set("in_message_index",b.inMessageIndex),d[3].set("attachment_type",b.attachmentType),d[3].set("should_transcode",b.shouldTranscode),d[3].set("use_double_phase",b.useDoublePhase),d[3].set("send_by_server",b.sendByServer),d[3].set("is_secure",b.isSecure),d[3].set("state",b.state),d[3].set("fbid",b.fbid),d[3].set("metadata",b.metadata),d[3].set("error",b.error),d[3].set("message_id",b.messageId),d[4]=(d[0].push(d[3]),d[0]))})},function(e){return d[2]=c.i64.of_int32(d[0].length),c.i64.neq(d[2],[0,0])?c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[0],[0,0]).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(b){return d[5]=d[3].get("state"),d[3],c.i64.neq(a[1],f)?a[2]!==f?(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],messageId:a[2],metadata:a[3]})})):(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],metadata:a[3]})})):c.i64.neq(a[4],f)?(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],error:a[4]})})):(c.i64.eq(d[5],[-1,4294967293])?(d[7]=[-1,4294967295],d[6]=d[7]):(c.i64.eq(d[5],[0,1])?d[7]=[0,2]:(c.i64.eq(d[5],[0,3])?d[8]=[0,4]:(c.i64.eq(d[5],[0,5])?d[9]=[0,6]:(c.i64.eq(d[5],[0,13])?d[10]=[0,14]:(c.i64.eq(d[5],[0,7])?d[11]=[0,8]:(c.i64.eq(d[5],[0,9])?d[12]=[0,10]:(c.i64.eq(d[5],[0,11])?d[13]=[0,12]:d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({state:d[6]})}))}]):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRemoveMediaSendJobs",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSResumeMediaSendJob",["LSGetMessageAttributionParams","LSInsertPhase2PendingTask","LSIssueSendAttachmentMessageTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(b){return d[0]=new c.Map(),d[1]=new c.Map(),d[1].set("main_job_succeeded",!1),d[1].set("resume_failed",!1),d[1].set("error",f),d[1].set("running_sub_job_states",d[0]),d[2]=new c.Map(),d[2].set("should_transcode",!1),d[2].set("use_double_phase",!1),d[2].set("send_by_server",!1),d[2].set("is_secure",!1),d[2].set("should_dedupe",!1),c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?0:(b=a.item,d[2].set("should_transcode",b.shouldTranscode),d[2].set("use_double_phase",b.useDoublePhase),d[2].set("send_by_server",b.sendByServer),d[2].set("is_secure",b.isSecure))})},function(b){return d[4]=new c.Map(),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[13]=a.offlineAttachmentId,d[11]=a.state,d[12]=a.error,c.i64.eq(d[11],[-1,4294967293])?d[10]=!0:(c.i64.eq(d[11],[0,1])?d[14]=!0:(c.i64.eq(d[11],[0,3])?d[15]=!0:(c.i64.eq(d[11],[0,5])?d[16]=!0:(c.i64.eq(d[11],[0,13])?d[17]=!0:(c.i64.eq(d[11],[0,7])?d[18]=!0:(c.i64.eq(d[11],[0,9])?d[19]=!0:(c.i64.eq(d[11],[0,11])?d[20]=!0:d[20]=!1,d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),d[10]=d[14]),d[10]?c.resolve(c.i64.eq(d[11],[0,5])||c.i64.eq(d[11],[0,11])?0:d[4].set(d[13],d[11])):c.i64.neq(d[12],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[12]))):(c.i64.eq(d[11],[-1,4294967295])?d[14]=[0,5]:(c.i64.eq(d[11],[-1,4294967294])?(d[16]=d[2].get("should_transcode"),d[2],d[15]=d[16]?[0,1]:[0,3]):(c.i64.eq(d[11],[0,2])?d[16]=[0,3]:(c.i64.eq(d[11],[0,4])?(d[18]=d[2].get("send_by_server"),d[2],d[19]=d[2].get("use_double_phase"),d[2],d[17]=d[18]?d[19]?[0,13]:f:[0,5]):(c.i64.eq(d[11],[0,6])?(d[19]=d[2].get("use_double_phase"),d[2],d[18]=d[19]?[0,13]:f):(c.i64.eq(d[11],[0,14])?(d[20]=d[2].get("use_double_phase"),d[2],d[21]=d[2].get("should_transcode"),d[2],d[19]=d[20]?d[21]?[0,7]:[0,9]:f):(c.i64.eq(d[11],[0,8])?d[20]=[0,9]:(c.i64.eq(d[11],[0,10])?(d[22]=d[2].get("send_by_server"),d[2],d[21]=d[22]?f:[0,11]):(c.i64.eq(d[11],[0,12])?d[22]=f:d[22]=f,d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),c.i64.neq(d[14],f)?c.seq([function(a){return c.fe(c.ftr(c.db.table(51).fetch(),function(a){return a.offlineAttachmentId===d[13]}),function(a){var b=a.update;a.item;return b({state:d[14]})})},function(a){return c.i64.eq(d[14],[0,5])||c.i64.eq(d[14],[0,11])?0:d[4].set(d[13],d[14])}]):c.resolve())})},function(b){return c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[5]=f:(b=a.item,d[5]=b.state)})},function(e){return c.i64.neq(d[5],f)?(d[10]=d[2].get("send_by_server"),d[2],d[11]=d[2].get("use_double_phase"),d[2],d[12]=d[2].get("use_double_phase"),d[2],(d[10]?d[11]?c.i64.eq(d[5],[0,10]):c.i64.eq(d[5],[0,4]):d[12]?c.i64.eq(d[5],[0,12]):c.i64.eq(d[5],[0,6]))?c.resolve(d[1].set("main_job_succeeded",!0)):c.i64.eq(d[5],[0,5])?c.seq([function(b){return d[13]=f,c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[15]=a.error,c.i64.eq(d[15],f)?(c.i64.neq(a.fbid,f)?d[16]=f:d[16]=[0,9],d[14]=d[16]):d[14]=d[15],c.i64.neq(d[14],f)?d[13]=d[14]:0})},function(e){return c.i64.neq(d[13],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.seq([function(e){return d[14]=d[2].get("is_secure"),d[2],d[14]?c.seq([function(b){return d[16]=c.createArray(),d[17]=!1,d[18]=[0,0],c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[23]=a.fbid,d[18]=c.i64.add(d[18],[0,1]),c.i64.neq(d[23],f)?d[24]=(d[16].push(d[23]),d[16]):0})},function(b){return d[19]=c.createArray(),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[23]=a.metadata,d[23]!==f?d[24]=(d[19].push(d[23]),d[19]):0})},function(a){return d[20]=c.i64.of_int32(d[16].length),d[21]=c.i64.of_int32(d[19].length),c.i64.neq(d[20],d[18])||c.i64.neq(d[21],d[18])?d[22]=[0,11]:(function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Started"),function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Completed"),d[22]=f),d[15]=d[22]}]):c.seq([function(e){return c.seq([function(b){return d[17]=c.createArray(),d[18]=!1,d[19]=[0,0],c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[22]=a.fbid,d[19]=c.i64.add(d[19],[0,1]),c.i64.neq(d[22],f)?d[23]=(d[17].push(d[22]),d[17]):0})},function(e){return d[20]=c.i64.of_int32(d[17].length),c.i64.neq(d[20],d[19])||c.i64.eq(d[19],[0,0])?c.resolve(d[21]=[0,10002]):c.seq([function(b){return c.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[f,f,f,f,f],d[22]=c[0],d[23]=c[1],d[24]=c[2],d[25]=c[3],d[26]=c[4],c):(b=a.item,c=[b.threadKey,b.senderId,b.text,b.replySourceId,b.replySourceTypeV2],d[22]=c[0],d[23]=c[1],d[24]=c[2],d[25]=c[3],d[26]=c[4],c)})},function(e){return c.i64.eq(d[22],f)||c.i64.eq(d[23],f)?c.resolve((c.i64.eq(d[22],f)?d[29]=[0,10003]:d[29]=[0,10004],d[28]=d[29])):c.seq([function(a){return c.db.table(9).fetch([[[d[22]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[29]=f:(b=a.item,d[29]=b.threadType)})},function(b){return c.ftr(c.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[f,f,f],d[31]=c[0],d[32]=c[1],d[33]=c[2],c):(b=a.item,c=[b.platformRef,b.platformToken,b.initiatingSource],d[31]=c[0],d[32]=c[1],d[33]=c[2],c)})},function(e){return c.i64.neq(d[29],f)?c.seq([function(e){return c.seq([function(e){return c.sp(b("LSGetMessageAttributionParams"),a[0]).then(function(a){return a=a,d[36]=a[0],d[37]=a[1],d[38]=a[2],a})},function(e){return c.i64.neq(d[36],f)?d[39]=d[36]:d[39]=[0,0],c.sp(b("LSIssueSendAttachmentMessageTask"),d[23],d[22],d[29],a[0],d[24],d[17],d[39],d[25],d[26],d[18],d[31],d[32],a[2])}])},function(a){return d[35]=f}]):c.resolve(d[35]=[0,10005])},function(a){return d[28]=d[35]}])},function(a){return d[21]=d[28]}])},function(a){return d[16]=d[21]}])},function(b){return c.i64.eq(d[16],f)?c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:[0,6]})}):c.resolve()},function(a){return d[15]=d[16]}])},function(b){return c.i64.eq(d[15],f)?(d[16]=d[2].get("send_by_server"),d[2],d[17]=d[2].get("use_double_phase"),d[2],d[18]=d[2].get("use_double_phase"),d[2],(d[16]?d[17]?c.i64.eq([0,6],[0,10]):c.i64.eq([0,6],[0,4]):d[18]?c.i64.eq([0,6],[0,12]):c.i64.eq([0,6],[0,6]))?c.resolve(d[1].set("main_job_succeeded",!0)):(c.i64.eq([0,6],[-1,4294967295])?d[19]=[0,5]:(c.i64.eq([0,6],[-1,4294967294])?(d[21]=d[2].get("should_transcode"),d[2],d[20]=d[21]?[0,1]:[0,3]):(c.i64.eq([0,6],[0,2])?d[21]=[0,3]:(c.i64.eq([0,6],[0,4])?(d[23]=d[2].get("send_by_server"),d[2],d[24]=d[2].get("use_double_phase"),d[2],d[22]=d[23]?d[24]?[0,13]:f:[0,5]):(c.i64.eq([0,6],[0,6])?(d[24]=d[2].get("use_double_phase"),d[2],d[23]=d[24]?[0,13]:f):(c.i64.eq([0,6],[0,14])?(d[25]=d[2].get("use_double_phase"),d[2],d[26]=d[2].get("should_transcode"),d[2],d[24]=d[25]?d[26]?[0,7]:[0,9]:f):(c.i64.eq([0,6],[0,8])?d[25]=[0,9]:(c.i64.eq([0,6],[0,10])?(d[27]=d[2].get("send_by_server"),d[2],d[26]=d[27]?f:[0,11]):(c.i64.eq([0,6],[0,12])?d[27]=f:d[27]=f,d[26]=d[27]),d[25]=d[26]),d[24]=d[25]),d[23]=d[24]),d[22]=d[23]),d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),c.i64.neq(d[19],f)?c.seq([function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:d[19]})})},function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}]):c.resolve())):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[15])))}])}]):c.i64.eq(d[5],[0,11])?c.seq([function(b){return d[13]=f,c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[14]=a.error,c.i64.neq(d[14],f)?d[13]=d[14]:0})},function(a){return c.i64.neq(d[13],f)?(d[1].set("resume_failed",!0),d[1].set("error",d[13])):d[1].set("main_job_succeeded",!0)}]):c.i64.eq(d[5],[0,13])?c.seq([function(e){return c.sp(b("LSInsertPhase2PendingTask"),a[0],a[1]).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.i64.neq(d[13],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.seq([function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:[0,14]})})},function(b){return d[1].set("main_job_succeeded",!0),c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}])}]):c.resolve(0)):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",[0,11])))},function(a){return d[7]=d[1].get("main_job_succeeded"),d[1],d[8]=d[1].get("resume_failed"),d[1],d[9]=d[1].get("error"),d[1],a=[d[7],d[8],d[9],d[4]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSSendTypingIndicator",["LSIssueNewFireAndForgetTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[];return c.seq([function(e){return c.seq([function(b){return d[2]=["typing","_",c.i64.to_string(a[0])].join(""),c.fe(c.ftr(c.db.table(5).fetch(),function(a){return d[2]===a.queueName}),function(a){return a["delete"]()})},function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("is_group_thread",a[1]),d[0].set("is_typing",a[2]),d[0].set("attribution",[0,0]),d[1]=c.toJSON(d[0]),c.sp(b("LSIssueNewFireAndForgetTask"),d[2],[0,3],d[1])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MWComposerXacDisclosureRelayQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4117708481614906"}),null);
__d("MWComposerXacDisclosureRelayQuery.graphql",["MWComposerXacDisclosureRelayQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],c=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],d={kind:"InlineFragment",selections:[{args:null,documentName:"MWComposerXacDisclosureRelayQuery",fragmentName:"MWComposerXacDisclosureView_nux",fragmentPropName:"nux",kind:"ModuleImport"}],type:"DefaultNUX",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWComposerXacDisclosureRelayQuery",selections:[{alias:"xacThreadDisclosureNux",args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWComposerXacDisclosureRelayQuery",selections:[{alias:"xacThreadDisclosureNux",args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("MWComposerXacDisclosureRelayQuery_facebookRelayOperation"),metadata:{},name:"MWComposerXacDisclosureRelayQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport",["createCometMentionMatchStrategy"],(function(a,b,c,d,e,f,g){"use strict";var h=["@","\\uff20"].join(""),i=",\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>:;";function a(a){a=a.minMatchLength;return c("createCometMentionMatchStrategy")({disallowedChars:i,minMatchLength:a,name:"CometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport("+a.toString()+")",triggers:h})}g["default"]=a}),98);
__d("MessengerLexicalEntityTextNode",["Lexical","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var d=a.prototype;d.getEntity=function(){throw c("unrecoverableViolation")("CometMessengerLexicalEntityTextNode does not implement getEntity","messenger_comet")};return a}(d("Lexical").TextNode);function a(a){return a instanceof h}g.MessengerLexicalEntityTextNode=h;g.isMessengerLexicalEntityTextNode=a}),98);
__d("MessengerLexicalActorNode",["MessengerLexicalEntityTextNode"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.replace(" name","");a=a.replace(" nickname","");return a}var i=function(b){babelHelpers.inheritsLoose(a,b);a.getType=function(){return"actor"};a.clone=function(b){return new a({id:b.__contactID,text:b.__text.slice(1)},b.__key)};function a(a,c){var d=a.id;a=a.text;a=b.call(this,"@"+a,c)||this;a.__contactID=h(d);return a}var c=a.prototype;c.createDOM=function(a){a=b.prototype.createDOM.call(this,a);a.className="bnpdmtie diy96o5h";a.spellcheck=!1;return a};c.getEntity=function(){return{id:this.__contactID,isWeak:!1}};return a}(d("MessengerLexicalEntityTextNode").MessengerLexicalEntityTextNode);function a(a){return new i(a).setMode("segmented").toggleDirectionless()}function b(a){return a instanceof i}g.MessengerLexicalActorNode=i;g.createMessengerLexicalActorNode=a;g.isMessengerLexicalActorNode=b}),98);
__d("MWTooltipGroup.react",["cr:11874"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:11874")}),98);
__d("MWConsole",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){}g.log=a}),98);
__d("LSGenerateTraceId.bs",["LSRequestId.bs","gkx","killswitch"],(function(a,b,c,d,e,f){"use strict";function a(a){if(!b("killswitch")("MESSENGER_WEB_DATA_TRACE_ID")&&b("gkx")("1951030"))return b("LSRequestId.bs").generate(void 0)}f.make=a}),null);
__d("MWComposerDisclosureContainer.bs",["MWLSThreadDisplayContext.bs","bs_caml_obj","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{color:"m9osqain",marginTop:"n1l5q3vz",paddingTop:"l29c1vbm",paddingEnd:"dpri0uem",paddingBottom:"ae35evdt",paddingStart:"pcu7st4i",textAlign:"oqcyycmt"},inner:{maxWidth:"bl38xub0",marginTop:"km676qkl",marginEnd:"ad2k81qe",marginBottom:"myj7ivm5",marginStart:"f9o22wc5"},border:{borderTop:"opwvks06"}};function a(a){var c=a.children;a=a.testid;var d=b("MWLSThreadDisplayContext.bs").useHook(void 0);return i.jsx("div",{className:(h||(h=b("stylex")))(j.root,b("bs_caml_obj").caml_equal(d,0)?j.border:!1),"data-testid":a,children:i.jsx("div",{className:h(j.inner),children:c})})}c=a;f.styles=j;f.make=c}),null);
__d("MWChatComposerGroupMessageRequestInfoText.bs",["fbt","CometLazyDialogTrigger.react","CometPressable.react","JSResource","LsSystemFolder.bs","MDSText.react","MWComposerDisclosureContainer.bs","MWLSThreadFolder.bs","MWThreadKey.bs","MWVerticalRhythm.bs","MessageRequestsLog.bs","MessagingThreadType.bs","bs_caml_int64","bs_curry","bs_int64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.onDeleteConversation,d=a.onLeaveGroup;a=a.isGXAC;a=a!==void 0?a:!1;var e=b("bs_int64").to_string(b("MWThreadKey.bs").useIdMemoizedExn(void 0)),f=b("MWLSThreadFolder.bs").useHook(void 0),h=b("bs_caml_int64").to_int32(b("MessagingThreadType.bs").group),j=f==="pending"?b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").pending):b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").other);i.useEffect(function(){b("MessageRequestsLog.bs").logMessageRequestInfoShown(e,h,j)},[]);var k=i.useRef(null);return i.jsxs(b("MWComposerDisclosureContainer.bs").make,{children:[a?i.jsxs(i.Fragment,{children:[i.jsx(b("MDSText.react"),{color:"secondary",type:"entityHeaderMeta3",children:g._(/*FBT_CALL*/"Nh\u00f3m n\u00e0y c\u00f3 c\u1ea3 ng\u01b0\u1eddi d\u00f9ng Facebook v\u00e0 ng\u01b0\u1eddi d\u00f9ng Instagram"/*FBT_CALL*/)}),i.jsx(b("MWVerticalRhythm.bs").make,{height:8})]}):null,i.jsxs(b("MDSText.react"),{color:"secondary",type:"body4",children:[a?g._(/*FBT_CALL*/"N\u1ebfu b\u1ea1n tr\u1ea3 l\u1eddi, b\u1ea1n v\u00e0 c\u00e1c th\u00e0nh vi\u00ean kh\u00e1c c\u00f3 th\u1ec3 xem th\u00f4ng tin nh\u01b0 th\u1eddi \u0111i\u1ec3m b\u1ea1n \u0111\u1ecdc tin nh\u1eafn."/*FBT_CALL*/):g._(/*FBT_CALL*/"N\u1ebfu b\u1ea1n tr\u1ea3 l\u1eddi, b\u1ea1n v\u00e0 nh\u1eefng th\u00e0nh vi\u00ean kh\u00e1c c\u00f3 th\u1ec3 g\u1ecdi cho nh\u00f3m v\u00e0 xem c\u00e1c th\u00f4ng tin nh\u01b0 th\u1eddi \u0111i\u1ec3m b\u1ea1n \u0111\u1ecdc tin nh\u1eafn."/*FBT_CALL*/),i.jsx(b("MWVerticalRhythm.bs").make,{height:5}),i.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResource")("MWChatDeclineGroupMessageRequestDialogForJSResource.react").__setRef("MWChatComposerGroupMessageRequestInfoText.bs"),dialogProps:{onDeleteConversation:c,onLeaveGroup:d},children:function(a){return i.jsx(b("CometPressable.react"),{ref:k,testid:"mw_group_message_request_info_text_trigger",onPress:function(c){b("MessageRequestsLog.bs").logDenialOptionsTapped(e,h,j);return b("bs_curry")._1(a,void 0)},overlayDisabled:!0,children:i.jsx(b("MDSText.react"),{color:"primary",type:"bodyLink4",children:g._(/*FBT_CALL*/"T\u00f4i kh\u00f4ng mu\u1ed1n tr\u1ea3 l\u1eddi"/*FBT_CALL*/)})})}})]})],testid:"mw_group_message_request_info_text"})}c=a;f.make=c}),null);
__d("MWChatHotlikeEmitter.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";var g={contents:0};function a(a){var c=new Map();return{notify:function(a){c.forEach(function(d,c,e){return b("bs_curry")._1(d,a)})},subscribe:function(a){var b=g.contents;g.contents=g.contents+1|0;c.set(b,a);return function(a){return c["delete"](b)}}}}f.i=g;f.createEmitter=a}),null);
__d("MWComposerXacDisclosureRelay.react",["CometPlaceholder.react","CometRelay","MWComposerXacDisclosureRelayQuery.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=8659;function a(a){var e=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWComposerXacDisclosureRelayQuery.graphql"),{nux_id:j}),f=e.xacThreadDisclosureNux;return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:f!=null?i.jsx(d("CometRelay").MatchContainer,{match:f,props:{isThreadInNullState:a.isThreadInNullState,nuxKey:e.xacThreadDisclosureNux,size:a.size}}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRequestSharedTexts.bs",["fbt"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return g._(/*FBT_CALL*/"N\u1ebfu b\u1ea1n tr\u1ea3 l\u1eddi, {FBFullName} c\u0169ng s\u1ebd c\u00f3 th\u1ec3 g\u1ecdi cho b\u1ea1n, xem c\u00e1c th\u00f4ng tin nh\u01b0 Tr\u1ea1ng th\u00e1i ho\u1ea1t \u0111\u1ed9ng v\u00e0 th\u1eddi \u0111i\u1ec3m b\u1ea1n \u0111\u1ecdc tin nh\u1eafn."/*FBT_CALL*/,[g._param("FBFullName",a)])}function b(a){return g._(/*FBT_CALL*/"T\u00f4i kh\u00f4ng mu\u1ed1n nh\u1eadn tin nh\u1eafn c\u1ee7a {name}"/*FBT_CALL*/,[g._param("name",a)])}function c(a){return g._(/*FBT_CALL*/"B\u1ea1n c\u00f3 th\u1ec3 x\u00f3a v\u0129nh vi\u1ec5n cu\u1ed9c tr\u00f2 chuy\u1ec7n ho\u1eb7c ch\u1eb7n kh\u00f4ng cho {FBShortName} nh\u1eafn tin\/g\u1ecdi \u0111i\u1ec7n cho b\u1ea1n. Ch\u00fang t\u00f4i s\u1ebd kh\u00f4ng ti\u1ebft l\u1ed9 v\u1edbi h\u1ecd r\u1eb1ng b\u1ea1n \u0111\u00e3 l\u00e0m nh\u1eefng vi\u1ec7c n\u00e0y."/*FBT_CALL*/,[g._param("FBShortName",a)])}f.getFBUserInfoTextMessage=a;f.getDefaultInfoTextFooter=b;f.getDeclineUserDialogText=c}),null);
__d("MWLSChatComposerUserMessageRequestInfoText.bs",["fbt","CometLazyDialogTrigger.react","CometPressable.react","JSResource","LsSystemFolder.bs","MDSText.react","MDSTextPairing.react","MWComposerDisclosureContainer.bs","MWLSParticipantDetails.bs","MWLSThreadFolder.bs","MWMessageRequestSharedTexts.bs","MWThreadKey.bs","MWVerticalRhythm.bs","MessageRequestsLog.bs","MessagingThreadType.bs","bs_caml_int64","bs_curry","bs_int64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.fbid;a=a.onDeleteConversation;var d=b("bs_int64").to_string(b("MWThreadKey.bs").useIdMemoizedExn(void 0)),e=b("MWLSThreadFolder.bs").useHook(void 0),f=b("bs_caml_int64").to_int32(b("MessagingThreadType.bs").oneToOne),h=e==="pending"?b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").pending):b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").other);e=b("MWLSParticipantDetails.bs").useParticipantName(c);e=e!==void 0?e:g._(/*FBT_CALL*/"Ng\u01b0\u1eddi d\u00f9ng Facebook"/*FBT_CALL*/);var j=b("MWLSParticipantDetails.bs").useParticipantShortName(c);j=j!==void 0?j:g._(/*FBT_CALL*/"Ng\u01b0\u1eddi d\u00f9ng Facebook"/*FBT_CALL*/);var k=b("MWLSParticipantDetails.bs").useParticipantSecondaryName(c);k=k!==void 0&&k!==""?k:void 0;var l=k!==void 0?i.jsx(b("MDSText.react"),{color:"primary",type:"bodyLink4",children:g._(/*FBT_CALL*/"B\u1ea1n \u0111ang nh\u1eafn tin cho m\u1ed9t t\u00e0i kho\u1ea3n Instagram"/*FBT_CALL*/)}):null,m=k!==void 0?e!==k?g._(/*FBT_CALL*/"N\u1ebfu b\u1ea1n tr\u1ea3 l\u1eddi, {IGDisplayName} ({IGUserName}) c\u0169ng s\u1ebd c\u00f3 th\u1ec3 g\u1ecdi cho b\u1ea1n tr\u00ean Instagram v\u00e0 xem c\u00e1c th\u00f4ng tin nh\u01b0 Tr\u1ea1ng th\u00e1i ho\u1ea1t \u0111\u1ed9ng c\u00f9ng th\u1eddi \u0111i\u1ec3m b\u1ea1n \u0111\u1ecdc tin nh\u1eafn."/*FBT_CALL*/,[g._param("IGDisplayName",e),g._param("IGUserName",k)]):g._(/*FBT_CALL*/"N\u1ebfu b\u1ea1n tr\u1ea3 l\u1eddi, {IGUserName} c\u0169ng s\u1ebd c\u00f3 th\u1ec3 g\u1ecdi cho b\u1ea1n, xem c\u00e1c th\u00f4ng tin nh\u01b0 Tr\u1ea1ng th\u00e1i ho\u1ea1t \u0111\u1ed9ng v\u00e0 th\u1eddi \u0111i\u1ec3m b\u1ea1n \u0111\u1ecdc tin nh\u1eafn."/*FBT_CALL*/,[g._param("IGUserName",k)]):b("MWMessageRequestSharedTexts.bs").getFBUserInfoTextMessage(e),n=k!==void 0?e!==k?g._(/*FBT_CALL*/"T\u00f4i kh\u00f4ng mu\u1ed1n nh\u1eadn tin nh\u1eafn c\u1ee7a {name} ({username})"/*FBT_CALL*/,[g._param("name",e),g._param("username",k)]):g._(/*FBT_CALL*/"T\u00f4i kh\u00f4ng mu\u1ed1n nh\u1eadn tin nh\u1eafn c\u1ee7a {username}"/*FBT_CALL*/,[g._param("username",k)]):b("MWMessageRequestSharedTexts.bs").getDefaultInfoTextFooter(e),o=i.useRef(null);i.useEffect(function(){b("MessageRequestsLog.bs").logMessageRequestInfoShown(d,f,h)},[]);return i.jsxs(b("MWComposerDisclosureContainer.bs").make,{children:[i.jsx(b("MDSTextPairing.react"),{body:i.jsx(b("MDSText.react"),{align:"center",color:"secondary",type:"body4",children:m}),headline:l,level:4,textAlign:"center"}),i.jsx(b("MWVerticalRhythm.bs").make,{height:5}),i.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResource")("MWChatDeclineUserMessageRequestDialogForJSResource.react").__setRef("MWLSChatComposerUserMessageRequestInfoText.bs"),dialogProps:{onDeleteConversation:a,otherUserFbid:c,otherUserName:e,otherUserShortName:j,otherUserSecondaryName:k},children:function(a){return i.jsx(b("CometPressable.react"),{ref:o,testid:"mw_user_message_request_info_text_trigger",onPress:function(c){b("MessageRequestsLog.bs").logDenialOptionsTapped(d,f,h);return b("bs_curry")._1(a,void 0)},overlayDisabled:!0,children:i.jsx(b("MDSText.react"),{color:"primary",type:"bodyLink4",children:n})})}})],testid:"mw_user_message_request_info_text"})}c=a;f.make=c}),null);
__d("MWUseAriaDescribedByForComposer.bs",["fbt","MWLSActor.bs","ReQL.bs","ReQLSubscription.bs","ReQLSuspense.bs","ReQLTable","bs_caml","intlList","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=b("useReStore")(),d=b("MWLSActor.bs").useActor(void 0),e=b("ReQLSubscription.bs").useArray(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"participants").asc,{hd:a.threadKey,tl:0}),function(a){return b("ReQLSuspense.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"contacts").asc,{hd:a.contactId,tl:0}))})},[c,JSON.stringify(a.threadKey)]));return i.useMemo(function(){var c=a.threadName;if(c!==void 0)return g._(/*FBT_CALL*/"Vi\u1ebft cho {name of conversation}"/*FBT_CALL*/,[g._param("name of conversation",c)]).toString();var f=[];e.forEach(function(a){if(a!==void 0&&b("bs_caml").i64_neq(a.id,d)){f.push(a.name);return}});c=b("intlList")(f,b("intlList").CONJUNCTIONS.AND,b("intlList").DELIMITERS.COMMA);return g._(/*FBT_CALL*/"Vi\u1ebft cho {participant list}"/*FBT_CALL*/,[g._param("participant list",c)]).toString()},[JSON.stringify(a.threadKey),JSON.stringify(d)])}f.useHook=a}),null);
__d("MWV2ComposerRoundedCorners.bs",["Locale","react","stylex","useUniqueID"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={roundedCornerTopRight:{fill:"qbubdy2e",position:"pmk7jnqg",top:"kr520xx4",end:"n7fi1qx3",pointerEvents:"hzruof5a"},roundedCornerBottomRight:{fill:"qbubdy2e",position:"pmk7jnqg",bottom:"i09qtzwb",end:"n7fi1qx3",pointerEvents:"hzruof5a"},roundedCornerRtl:{transform:"c3knoul3"},svg:{display:"a8c37x1j"}};function a(a){a=b("useUniqueID")();return i.jsx("div",{className:(h||(h=b("stylex")))(j.roundedCornerTopRight,b("Locale").isRTL()?j.roundedCornerRtl:!1),children:i.jsxs("svg",{width:"18px",height:"18px",className:h(j.svg),children:[i.jsx("defs",{children:i.jsxs("mask",{id:a,children:[i.jsx("rect",{fill:"white",x:"-18",y:"0",width:"36",height:"36"}),i.jsx("circle",{fill:"black",cx:"0",cy:"18",r:"18"})]})}),i.jsx("rect",{x:"0",y:"0",width:"18",height:"18",mask:"url(#"+(a+")")})]})})}d={make:a};function c(a){a=b("useUniqueID")();return i.jsx("div",{className:(h||(h=b("stylex")))(j.roundedCornerBottomRight,b("Locale").isRTL()?j.roundedCornerRtl:!1),children:i.jsxs("svg",{width:"18px",height:"18px",className:h(j.svg),children:[i.jsx("defs",{children:i.jsxs("mask",{id:a,children:[i.jsx("rect",{fill:"white",x:"-18",y:"0",width:"36",height:"36"}),i.jsx("circle",{fill:"black",cx:"0",cy:"0",r:"18"})]})}),i.jsx("rect",{x:"0",y:"0",width:"18",height:"18",mask:"url(#"+(a+")")})]})})}e={make:c};f.styles=j;f.TopRight=d;f.BottomRight=e}),null);
__d("MWChatComposerShareFileCallout.bs",["fbt","LSThreadAttributionStore.bs","bs_belt_Option","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","react","useCometCallout","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function j(a){return b("bs_belt_Option").mapWithDefault(a,!1,function(a){return b("bs_caml_obj").caml_equal(b("bs_caml_option").nullable_to_opt(b("LSThreadAttributionStore.bs").sources.get(b("bs_int64").to_string(a))),"eventShareClassMaterials")})}function a(a){return j(a)}function k(a,c){return b("useCometCallout")({align:"end",arrowStyle:"edge",label:g._(/*FBT_CALL*/"Ch\u1ecdn m\u1ed9t file \u0111\u1ec3 chia s\u1ebb trong nh\u00f3m chat c\u1ee7a l\u1edbp"/*FBT_CALL*/),type:"accent",onClose:function(a){return b("bs_curry")._1(c,function(a){return!1})},onHide:function(a){return b("bs_curry")._1(c,function(a){return!1})},position:"above"},a)}function c(a,c,d){var e=j(a);a=b("usePrevious")(e);var f=e&&b("bs_caml_obj").caml_notequal(a==null?void 0:b("bs_caml_option").some(a),!0);a=i.useState(function(){if(e)return c;else return!1});var g=a[1];i.useEffect(function(){c?f&&b("bs_curry")._1(g,function(a){return!0}):f&&(b("bs_curry")._1(d,void 0),setTimeout(function(a){return b("bs_curry")._1(g,function(a){return!0})},250))},[f,d,c]);return k(a[0],g)}f.isOpenedFromSharingEntrypoint=j;f.shouldShowOnLoad=a;f.useCallout=k;f.useHook=c}),null);
__d("MWChatComposerMentionsViewItem.react",["CometImageIcon_DEPRECATED.react","CometSearchMentionsBaseViewItem.react","TetraTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,d=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var e=d.handle;e=d.key;e=d.label;var f=d.rawData,g=f.photoURI;f=f.subtitle;return h.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:d,children:h.jsxs("div",{className:"b38knevg j83agx80 bp9cbjyn","data-testid":void 0,children:[g!=null&&h.jsx("div",{className:"ciadx1gn mudddibn",children:h.jsx(c("CometImageIcon_DEPRECATED.react"),{size:28,src:g,style:"circle"})}),h.jsx("div",{className:"ozuftl9m",children:h.jsx(c("TetraTextPairing.react"),{body:e,bodyLineLimit:1,level:3,meta:f,metaLineLimit:1})})]})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("remove-accents-0.4.2",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},b=Object.keys(a).join("|"),c=new RegExp(b,"g"),d=new RegExp(b,"");b=function(b){return b.replace(c,function(b){return a[b]})};var e=function(a){return!!a.match(d)};g.exports=b;g.exports.has=e;g.exports.remove=b}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("remove-accents",["remove-accents-0.4.2"],(function(a,b,c,d,e,f){e.exports=b("remove-accents-0.4.2")()}),null);
__d("MWChatComposerMentionsTypeaheadDataSource",["fbt","CurrentUser","Promise","gkx","remove-accents"],(function(a,b,c,d,e,f,g,h){"use strict";var i=6;a=function(){function a(a,b){this.$1=[],this.$1=Array.from(a.values()).filter(function(a){return a.contactId!==c("CurrentUser").getID()}),this.$2=b}var d=a.prototype;d.bootstrap=function(){return};d.fetchCache=function(a){var b=this,d=a.query,e=[];this.$1.forEach(function(a){var c=a.actualName,f=a.contactId,g=a.nickname,h=a.profilePictureUrl;a=a.secondaryName;var i=null;a!=null&&b.$3(a,d)?i="secondaryName":b.$3(c,d)?i="name":g!=null&&b.$3(g,d)&&(i="nickname");if(i!=null&&h!=null){var j;e.push({decorType:"regular",handle:(j=a)!=null?j:i==="nickname"?(j=g)!=null?j:c:c,key:f+" "+i,label:c,rawData:{photoURI:h,source:i,subtitle:(j=a)!=null?j:g}})}});if(c("gkx")("1608686")){var f=h._(/*FBT_CALL*/"m\u1ecdi ng\u01b0\u1eddi"/*FBT_CALL*/).toString();if(this.$3(f,d)){var g=h._(/*FBT_CALL*/"Nh\u1eafc \u0111\u1ebfn m\u1ecdi ng\u01b0\u1eddi trong cu\u1ed9c tr\u00f2 chuy\u1ec7n n\u00e0y"/*FBT_CALL*/).toString();e.push({decorType:"regular",handle:f,key:""+this.$2,label:f,rawData:{source:"all",subtitle:g}})}f=h._(/*FBT_CALL*/"t\u1ea1i \u0111\u00e2y"/*FBT_CALL*/).toString();if(this.$3(f,d)){g=h._(/*FBT_CALL*/"Nh\u1eafc \u0111\u1ebfn t\u1ea5t c\u1ea3 nh\u1eefng ng\u01b0\u1eddi \u0111ang ho\u1ea1t \u0111\u1ed9ng trong \u0111o\u1ea1n chat n\u00e0y"/*FBT_CALL*/).toString();e.push({decorType:"regular",handle:f,key:this.$2+"-active",label:f,rawData:{source:"all",subtitle:g}})}}e.length>i&&(e=e.slice(0,i));return{entries:e,params:a}};d.fetchNetwork=function(a){return b("Promise").resolve(this.fetchCache(a))};d.$3=function(a,b){if(b.length===0)return!0;var d=c("remove-accents")(b).toLowerCase();b=c("remove-accents")(a).toLowerCase();return b.split(" ").some(function(a){return a.startsWith(d)})||b.startsWith(d)};return a}();g["default"]=a}),98);
__d("useMWChatMentionsDataSourceResolverConfig",["MWChatComposerMentionsTypeaheadDataSource","createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport","react","useCometMentionsDataSourceResolverConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(a){var b=a.participants,d=a.threadFBID;a=h(function(){return[{dataSource:new(c("MWChatComposerMentionsTypeaheadDataSource"))(b,d),matchStrategy:c("createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport")({minMatchLength:0})}]},[b,d]);return c("useCometMentionsDataSourceResolverConfig")(a,!0)}g["default"]=a}),98);
__d("MWChatUnavailableComposer.bs",["fbt","MDSText.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={root:{borderTop:"opwvks06",color:"m9osqain",marginTop:"n1l5q3vz",paddingTop:"l29c1vbm",paddingEnd:"dpri0uem",paddingBottom:"j1kv9ji2",paddingStart:"pcu7st4i"}};function a(a){a=g._(/*FBT_CALL*/"Ng\u01b0\u1eddi n\u00e0y \u0111ang v\u1eafng m\u1eb7t tr\u00ean Messenger."/*FBT_CALL*/);return j.jsx("div",{className:(i||(i=b("stylex")))(k.root),children:j.jsx(b("MDSText.react"),{align:"center",color:"secondary",type:"body4",children:a})})}c=a;f.styles=k;f.make=c}),null);
__d("MWVersion.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];f.v1=a;f.v2=c}),null);
__d("MessagingLoggingUtilsAttachmentTypeInt.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27];f.text=a;f.none=c;f.fbVoiceMessage=d;f.like=e;f.sticker=b;f.videoMessage=g;f.gif=h;f.$$location=i;f.image=j;f.application=k;f.video=l;f.audio=m;f.messengerInvite=n;f.share=o;f.liveLocation=p;f.lightweightAction=q;f.fakeNewsLink=r;f.p2pPayment=s;f.montageDirect=t;f.sphericalPhoto=u;f.reaction=v;f.story=w;f.selfieSticker=x;f.soundBite=y;f.armadilloSysPacket=z;f.deleteForMe=A;f.unsend=B;f.unsendReaction=C}),null);
__d("MessagingLoggingUtils.bs",["MessagingAttachmentType.bs","MessagingLoggingUtilsAttachmentTypeInt.bs","bs_caml"],(function(a,b,c,d,e,f){"use strict";function a(a){if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").none))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").none;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").sticker))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").sticker;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").image))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").image;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").animatedImage))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").gif;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").video))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").video;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").audio))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").audio;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").file))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").application;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").xma))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").share;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").ephemeralImage))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").image;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").ephemeralVideo))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").videoMessage;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").selfieSticker))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").selfieSticker;else if(b("bs_caml").i64_eq(a,b("MessagingAttachmentType.bs").soundBite))return b("MessagingLoggingUtilsAttachmentTypeInt.bs").soundBite;else return b("MessagingLoggingUtilsAttachmentTypeInt.bs").none}f.convertToAttachmentType=a}),null);
__d("MWChatTextFormatting",["$InternalEnum","MessengerFormattingConfig","TetraText.react","UnicodeUtils","cr:1695543","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=b("$InternalEnum").Mirrored(["CodeBlock","InlineCode","BlockQuote","InlineQuote","Bold","Italics","StrikeThrough"]);function j(a){var b,d=function(a){return a[2]},e=1,f=!0,g=function(a){return!0};switch(a){case i.Bold:b=c("MessengerFormattingConfig").boldConfig.pattern;break;case i.Italics:b=c("MessengerFormattingConfig").italicConfig.pattern;break;case i.StrikeThrough:b=c("MessengerFormattingConfig").strikethroughConfig.pattern;break;case i.InlineCode:b=c("MessengerFormattingConfig").codeConfig.pattern;break;case i.BlockQuote:b=c("MessengerFormattingConfig").blockQuoteConfig.pattern;f=!1;break;case i.InlineQuote:g=function(a){return a.trim()!==">"};b=c("MessengerFormattingConfig").singleInlineBlockQuoteConfig.pattern;f=!1;break;case i.CodeBlock:d=function(a){var b;return(b=a[4])!=null?b:a[5]};b=c("MessengerFormattingConfig").codeBlockV2Config.pattern;f=!1;break}if(b==null)throw c("unrecoverableViolation")("No formatting config found for given format","messenger_comet");return{getCleanText:d,hasClosingTag:f,regExp:new RegExp(b,"gm"),tagIndex:e,validator:g}}var k=[i.CodeBlock,i.InlineCode,i.BlockQuote,i.InlineQuote,i.Bold,i.Italics,i.StrikeThrough];function a(a,d){switch(d.format){case i.Bold:return h.jsx("b",{children:d.text});case i.Italics:return h.jsx("i",{children:d.text});case i.StrikeThrough:return h.jsx("strike",{children:d.text});case i.CodeBlock:return h.jsx("div",{className:"ii04i59q b3onmgus e5nlhep0 ph5uu5jm ecm0bbzt l82x9zwi uo3d90p7 pw54ja7n ue3kfks5 b3i9ofy5",children:h.jsx(c("TetraText.react"),{type:"body4",children:h.jsx("code",{children:d.text})})});case i.InlineCode:return h.jsx("code",{className:"",children:d.text});case i.BlockQuote:case i.InlineQuote:return h.jsx(b("cr:1695543"),{children:d.text})}}a.displayName=a.name+" [from "+f.id+"]";function e(a,d){switch(d.format){case i.Bold:return h.jsx("b",{children:d.text});case i.Italics:return h.jsx("i",{children:d.text});case i.StrikeThrough:return h.jsx("strike",{children:d.text});case i.CodeBlock:return h.jsx("div",{className:"ii04i59q b3onmgus e5nlhep0 ph5uu5jm ecm0bbzt l82x9zwi uo3d90p7 pw54ja7n ue3kfks5 b3i9ofy5",children:h.jsx(c("TetraText.react"),{type:"body4",children:h.jsx("code",{children:d.text})})});case i.InlineCode:return h.jsx("code",{className:"",children:d.text});case i.BlockQuote:case i.InlineQuote:return h.jsx(b("cr:1695543"),{children:d.text})}}e.displayName=e.name+" [from "+f.id+"]";function l(a){var b=[];k.forEach(function(c){var e=j(c),f=e.getCleanText,g=e.hasClosingTag,h=e.regExp,i=e.tagIndex;e=e.validator;var k;if(!e(a))return;e=function(){if(k==null)return"break";var e=d("UnicodeUtils").substr(a,0,k.index);e=e.length-d("UnicodeUtils").strlen(e);var h=k.index-e,j=k[0].length;g&&(h+=k[i].length,j-=k[i].length);e=function(a){var b=h+j,c=a.offset+a.length;return b>a.offset&&h<c};var l=f(k);if(!b.find(e)){if(b.length>0){e=b[b.length-1];if(e.entity.format===c&&e.offset+e.length+1===h){e.entity.text+="\n"+l;e.length+=j+1;return"continue"}}b.push({entity:{__typename:"MessengerTextFormatting",format:c,text:l},length:j,offset:h})}};_loop:while((k=h.exec(a))!=null){var l=e();switch(l){case"break":break _loop;case"continue":continue}}});return b}g.messageRenderer=a;g.replyRenderer=e;g.getFormattingRanges=l}),98);
__d("MWChatReplyText.bs",["CometTextWithEntities.react","MWChatTextFormatting","MWChatTextTransform.bs","bs_caml_option","bs_curry","cr:385","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={replyToText:{color:"m9osqain"}};function a(a){var c=a.text;a=a.ranges;var d={};d.MessengerTextFormatting=[b("MWChatTextFormatting").replyRenderer];c=b("cr:385")==null?c:b("bs_curry")._1(b("cr:385").unvault,c);c={maxLength:120,maxLines:2,truncationStyle:"ellipsis-only",withParagraphs:!1,text:c,renderers:d,transforms:b("MWChatTextTransform.bs").epdTextTransformsNoVault};a!==void 0&&(c.ranges=b("bs_caml_option").valFromOption(a));d=i.jsx(b("CometTextWithEntities.react"),c);return i.jsx("div",{dir:"auto",className:(h||(h=b("stylex")))(j.replyToText),children:d})}c=a;f.styles=j;f.$MAWVault$requireCond=b("cr:385");f.make=c}),null);
__d("MWChatHotLikeEmitterContext.bs",["MWChatHotlikeEmitter.bs","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("MWChatHotlikeEmitter.bs").createEmitter(void 0),j=h.createContext(i);function a(a){a=a.children;return h.createElement(j.Provider,{value:i,children:a})}d={make:a};function c(a){return h.useContext(j)}f.emitter=i;f.context=j;f.Provider=d;f.useHook=c}),null);
__d("MWChatUseLatch.bs",["cr:361"],(function(a,b,c,d,e,f){"use strict";a=b("cr:361").useLatch;f.$MWLSUseLatch$OR$WorkplaceMSUseLatch$requireCond=b("cr:361");f.useLatch=a}),null);
__d("MWLSUseLatch.bs",["CometThrottle","Run","bs_curry","debounce","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("CometThrottle");function a(a,c,d){var e=c!==void 0?c:!1;h.useEffect(function(){if(!e)return;var c=b("Run").onUnload(function(c){return b("bs_curry")._1(a,!1)});return function(a){return c.remove()}},[e,a]);return h.useMemo(function(){var c={contents:!1},e=b("debounce")(function(d){if(!c.contents)return b("bs_curry")._1(a,!1)},d|0),f=i(function(c){return b("bs_curry")._1(a,!0)},3e3,{leading:!0,trailing:!1}),g=function(d){b("bs_curry")._1(a,!1),c.contents=!0},h=function(a){b("bs_curry")._1(f,void 0);return e(void 0)};return[h,g]},[a,d])}f.throttle=i;f.useLatch=a}),null);
__d("LSNullstateCTAType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];f.none=a;f.getStarted=c;f.icebreaker=d}),null);
__d("MWV2ComposerDisclosure.bs",["CometErrorBoundary.re","CometPlaceholder.react","FBID.bs","LS.bs","LSAuthorityLevel.bs","LSMessagingThreadTypeUtil.bs","LSOptimisticRemoveParticipantsFromGroupThread","LSOptimisticRemoveThread","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","LSThreadRemoveType.bs","LSTransaction.bs","LSVec.bs","LsMessageRequestsActions.bs","LsSystemFolder.bs","MWChatComposerGroupMessageRequestInfoText.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWComposerXacDisclosureRelay.react","MWLSActor.bs","MWLSChatComposerUserMessageRequestInfoText.bs","MWLSContactTypeExactUtils.bs","MWLSThreadDisplayContext.bs","MWLSThreadFolder.bs","MessageRequestsLog.bs","MessagingThreadType.bs","bs_caml","bs_caml_int64","bs_curry","bs_int64","cr:958","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){var c=b("useReStore")(),d=b("MWLSActor.bs").useActor(void 0);return h.useCallback(function(e){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSOptimisticRemoveParticipantsFromGroupThread")(a.threadKey,b("LSVec.bs").make([d]),b("LS.bs").make(c))},"readWrite"),void 0,void 0)},[JSON.stringify(a.threadKey)])}function j(a){var c=a.thread,d=a.participantsAndContacts;a=a.forceVoiceIndicatorShown_TEST_ONLY;var e=b("useReStore")(),f=b("MWChatStateV2.bs").useDispatch(void 0),g=b("MWLSThreadDisplayContext.bs").useHook(void 0);g=g===1?"large":"small";var j=i(c),k=b("MWLSThreadFolder.bs").useHook(void 0),l=k==="pending"?b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").pending):b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").other),m=c.threadType,n=c.threadKey,o=h.useCallback(function(a){b("promiseDone")(b("LSTransaction.bs").run(e,function(a){return b("LSOptimisticRemoveThread")(n,b("LSThreadRemoveType.bs").deleteThread,b("LS.bs").make(a))},"readWrite"),function(a){return b("bs_curry")._1(f,b("MWChatStateActions.bs").closeTabByThreadKey(Date.now(),n))},void 0)},[b("bs_int64").to_string(n),e]);k=h.useCallback(function(a){b("MessageRequestsLog.bs").logActionConfirmed(b("bs_int64").to_string(n),b("bs_caml_int64").to_int32(m),l,b("bs_caml_int64").to_int32(b("LsMessageRequestsActions.bs").$$delete));return b("bs_curry")._1(o,void 0)},[o,b("bs_int64").to_string(n),b("bs_int64").to_string(m),l]);var p=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").messageRequestComposerBanner,c),q=b("LSMessagingThreadTypeUtil.bs").isGroup(m),r=h.useMemo(function(){return d.some(function(a){return b("MWLSContactTypeExactUtils.bs").isIgContact(a[1])})},[d]);if(p)if(q)p=h.jsx(b("MWChatComposerGroupMessageRequestInfoText.bs").make,{onDeleteConversation:k,onLeaveGroup:function(a){b("MessageRequestsLog.bs").logActionConfirmed(b("bs_int64").to_string(n),b("bs_caml_int64").to_int32(b("MessagingThreadType.bs").group),l,b("bs_caml_int64").to_int32(b("LsMessageRequestsActions.bs").leaveGroup));return b("bs_curry")._1(j,void 0)},isGXAC:r});else{q=b("FBID.bs").ofStringExn(b("bs_int64").to_string(n));p=h.jsx(b("MWLSChatComposerUserMessageRequestInfoText.bs").make,{fbid:q,onDeleteConversation:k})}else p=r&&b("gkx")("1839788")?h.jsx(b("MWComposerXacDisclosureRelay.react"),{isThreadInNullState:b("bs_caml").i64_lt(c.authorityLevel,b("LSAuthorityLevel.bs").authoritative),size:g}):null;return h.jsxs(h.Fragment,{children:[b("cr:958")==null?null:h.jsx(b("cr:958").make,{forceShown_TEST_ONLY:a}),p]})}c={make:j};function a(a){var c=a.thread,d=a.participantsAndContacts;a=a.forceVoiceIndicatorShown_TEST_ONLY;a=a!==void 0?a:!1;return h.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:h.jsx(b("CometPlaceholder.react"),{children:h.jsx(j,{thread:c,participantsAndContacts:d,forceVoiceIndicatorShown_TEST_ONLY:a}),fallback:null})})}d=a;f.useLeaveGroup=i;f.$MWChatComposerVoiceIndicator$requireCond=b("cr:958");f.Impl=c;f.make=d}),null);
__d("MWV2DisabledPageComposer.bs",["fbt","ix","CometLazyPopoverTrigger.react","FBID.bs","JSResource","LS.bs","LSMailboxType.bs","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","LSOptimisticSendMessage","LSThreadAttributionStore.bs","LSThreadAttributionTypeUtil.bs","LSTransaction.bs","MWLSActor.bs","MWLSThreadDisplayContext.bs","MessagingThreadType.bs","TetraButton.react","bs_curry","bs_int64","fbicon","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react");function k(a){var c=b("useReStore")(),d=b("MWLSActor.bs").useActor(void 0);a=b("MWLSThreadDisplayContext.bs").useHook(void 0);var e=a!==void 0?a===1?"inboxInThread":a===0?"chatInThread":"unknown":"unknown";return j.useCallback(function(a){return function(f,g){var h=b("LSTransaction.bs").run(c,function(c){var h=b("LSThreadAttributionStore.bs").getSource(e,b("bs_int64").to_string(a));h=b("LSThreadAttributionTypeUtil.bs").toLSThreadAttribution(h);return b("LSOptimisticSendMessage")(d,a,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,f,f,!1,void 0,void 0,void 0,void 0,h,void 0,g,void 0,b("LSMessageReplySourceType.bs").message,b("LSMessageReplySourceTypeV2.bs").message,void 0,void 0,!0,!0,void 0,void 0,void 0,b("LS.bs").make(c))},"readWrite");b("promiseDone")(h,void 0,void 0)}},[c,d])}function a(a){a=a.thread;var c=k(void 0),d=a.threadKey,e=function(a){var e=a.title;a=a.id;return b("bs_curry")._3(c,d,e,a)};return j.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResource")("LSComposerPersistentMenu.react").__setRef("MWV2DisabledPageComposer.bs"),popoverProps:{onClose:function(a){},onSelect:e,pageId:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.threadKey))},align:"middle",children:function(a,c,d,e,f,i,k){return j.jsx("div",{className:"tw6a2znq f10w8fjw d1544ag0 pybr56ya pcgkmkmd qzhwtbm6 j83agx80",ref:a,children:j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(h("512878"),20),label:g._(/*FBT_CALL*/"Menu"/*FBT_CALL*/),onPress:function(a){return b("bs_curry")._1(c,void 0)},reduceEmphasis:!0})})}})}c=a;f.make=c}),null);
__d("MWV2ErrorComposer.bs",["fbt","MDSText.react","MDSTextPairing.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={root:{borderTop:"l6v480f0",backgroundColor:"nred35xi",paddingEnd:"s90ymo97",paddingStart:"geeej9ta",paddingTop:"jktsbyx5",paddingBottom:"osnr6wyh"}};function a(a){return j.jsx("div",{className:(i||(i=b("stylex")))(k.root),children:j.jsx(b("MDSTextPairing.react"),{meta:j.jsx(b("MDSText.react"),{type:"meta3",numberOfLines:2,children:g._(/*FBT_CALL*/"Nguy\u00ean nh\u00e2n c\u00f3 th\u1ec3 l\u00e0 do l\u1ed7i k\u1ef9 thu\u1eadt m\u00e0 ch\u00fang t\u00f4i \u0111ang t\u00ecm c\u00e1ch kh\u1eafc ph\u1ee5c."/*FBT_CALL*/)}),headline:g._(/*FBT_CALL*/"\u0110\u00e3 x\u1ea3y ra l\u1ed7i."/*FBT_CALL*/),level:4,textAlign:"center",reduceEmphasis:!0,headlineColor:"secondary"})})}c=a;f.styles=k;f.make=c}),null);
__d("MWV2ChatComposerGetViewContent",["Lexical","MessengerLexicalEntityTextNode"],(function(a,b,c,d,e,f,g){"use strict";a={getRanges:function(a){var b=[],c=0;a.getEditorState().read(function(){var a=d("Lexical").$getRoot().getFirstChild();a instanceof d("Lexical").ElementNode&&a.getChildren().forEach(function(a){if(d("MessengerLexicalEntityTextNode").isMessengerLexicalEntityTextNode(a)){var e=a.getEntity();b.push({id:e.id,length:a.getTextContent().length,offset:c,type:"p"})}c+=a.getTextContent().length})});return b}};b=a;g["default"]=b}),98);
__d("mwpLexicalCreateEditor",["CometLexicalEmojiNode","FBLogger","Lexical","MessengerLexicalActorNode","cometLexicalBaseTheme","mlcErrorHandler"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("Lexical").createEditor({nodes:[d("MessengerLexicalActorNode").MessengerLexicalActorNode,d("CometLexicalEmojiNode").EmojiNode],onError:function(b){return c("mlcErrorHandler")(b,a,function(a){c("FBLogger")("messenger_web_product").catching(b).mustfix("Lexical Error MWP \u2013 "+a)})},theme:babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{paragraph:"kvgmc6g5 oygrvhab"})});return a}g["default"]=a}),98);
__d("useMWPCometComposerPrepopulateDraftMessage",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useLayoutEffect;function a(a,b){h(function(){var c=b.current;if(c==null)return;a.update(function(){if(b!=null){var a=d("Lexical").$getRoot(),e=a.getFirstChild();d("Lexical").$isParagraphNode(e)||(e=d("Lexical").$createParagraphNode(),a.append(e));a=d("Lexical").$createTextNode(c);e.append(a);a.select()}})},[a,b])}g["default"]=a}),98);
__d("useMWPLexicalClearEditor",["Lexical","MLCCommandListenerPriority","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useLayoutEffect;function a(a){h(function(){return a.addListener("command",function(b){if(b==="clearEditor"){a.update(function(){var a=d("Lexical").$getRoot(),b=d("Lexical").$getSelection(),c=d("Lexical").$createParagraphNode();a.clear();a.append(c);b!==null&&c.select()});return!0}return!1},c("MLCCommandListenerPriority").EDITOR)},[a])}g["default"]=a}),98);
__d("MWPComposerEditor.bs",["DEPRECATED_useLexicalPlainText","LS.bs","LSTransaction.bs","LSUpdateDraftMessage","LexicalRootHelpers","MWChatFocusComposerContext.bs","MWChatUseLatch.bs","MWV2ChatComposerGetViewContent","MWV2ComposerHasContentContext.bs","MWV2IsTabFocusedContext.bs","MWV2ReplyContext.bs","bs_caml_obj","bs_caml_option","bs_curry","cr:11463","mwpLexicalCreateEditor","promiseDone","react","useCometLexicalCommitMessageOnEnter","useDebounced","useLexicalIsTextContentEmpty","useMWPCometComposerPrepopulateDraftMessage","useMWPLexicalClearEditor","usePrevious","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){h.useEffect(function(){b("bs_curry")._1(c,a.getEditorState())},[a,c]),h.useEffect(function(){return a.addListener("update",function(a){return b("bs_curry")._1(c,a.editorState)})},[c,a])}function j(a,c){c=b("bs_curry")._3(b("MWChatUseLatch.bs").useLatch,c,!0,5e3);var d=c[1],e=c[0],f=h.useRef("");h.useEffect(function(){var c=function(a){a=a.editorState.read(function(a){return b("LexicalRootHelpers").$textContentCurry()});if(a!==f.current){f.current=a;if(a==="")return b("bs_curry")._1(d,void 0);else return b("bs_curry")._1(e,void 0)}};return a.addListener("update",c)},[e,d,a])}function k(a){var c=b("useReStore")();return h.useCallback(function(d){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSUpdateDraftMessage")(a.threadKey,d,b("LS.bs").make(c))},"readWrite"),void 0,void 0)},[c,JSON.stringify(a.threadKey)])}function l(a){var c=b("MWV2ReplyContext.bs").useContext(void 0),d=c.reply,e=b("usePrevious")(d);h.useEffect(function(){var c=e==null?d!==void 0:b("bs_caml_obj").caml_notequal(e,d)?!0:!1;c&&a.focus(function(a){})},[a,d,e==null?void 0:b("bs_caml_option").some(e)])}var m=b("cr:11463")==null?function(a){}:b("cr:11463").useHook;function a(a){var c=a.thread,d=a.isPreviewThread,e=a.mediaStaging,f=a.onSendMessage,g=a.onSendEmptyMessage,n=a.onTypingStateChanged,o=a.isSendDisabled;a=a.children;var p=o!==void 0?o:!1;o=c.draftMessage;var q=h.useRef(null);o=h.useRef(o);b("bs_curry")._1(m,q.current);var r=h.useMemo(function(){return b("mwpLexicalCreateEditor")()},[]),s={contents:function(a){return r.execCommand("clearEditor")}},t=k(c),u=b("useDebounced")(t,2e3,void 0),v=h.useRef(void 0);c=b("MWV2ComposerHasContentContext.bs").useContext(void 0);var w=c.shouldClearDraftMessageRef,x=c.hasContentRef;h.useEffect(function(){return function(a){if(w!==void 0&&w.current)return b("bs_curry")._1(t,"");a=v.current;if(a!==void 0)return b("bs_curry")._1(t,a)}},[]);c=h.useCallback(function(a){a=a.read(function(a){return b("LexicalRootHelpers").$textContentCurry()});v.current=a;x!==void 0&&(x.current=a!=="");return u(a)},[r,t]);i(r,c);j(r,n);c=b("useLexicalIsTextContentEmpty")(r);n=e.length>0;var y=!c||n;e=h.useContext(b("MWChatFocusComposerContext.bs").context);var z=e.setFocusComposer;h.useEffect(function(){b("bs_curry")._1(z,function(a){return r.focus(function(a){})})},[r]);var A=b("MWV2IsTabFocusedContext.bs").useContext(void 0);h.useEffect(function(){A&&!d&&r.focus(function(a){})},[r,A,d]);l(r);b("useMWPCometComposerPrepopulateDraftMessage")(r,o);var B=function(a,c,d,e,g,h,i,j,k,l){b("bs_curry").app(f,[a,c,d,e,g,h,i,j,k,void 0,void 0]);return r.focus(function(a){})};c=h.useCallback(function(a){if(p)return;if(y){a=b("MWV2ChatComposerGetViewContent").getRanges(r);var c=r.getEditorState();c=c.read(function(a){return b("LexicalRootHelpers").$textContentCurry()});B(c,a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}else b("bs_curry")._1(g,void 0);v.current="";return b("bs_curry")._1(s.contents,void 0)},[r,B,y,p]);b("useCometLexicalCommitMessageOnEnter")(r,c);b("DEPRECATED_useLexicalPlainText")(r);b("useMWPLexicalClearEditor")(r);return b("bs_curry")._4(a,r,y,q,c)}c=a;f.$MWUseKeyCommandsForComposer$OR$null$requireCond=b("cr:11463");f.make=c}),null);
__d("LsReplyRenderedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743878");c=b("FalcoLoggerInternal").create("ls_reply_rendered",a);e.exports=c}),null);
__d("MWV2ComposerReplyView.bs",["fbt","ix","CometErrorBoundary.re","CometTriggerAccessibilityAlertContext","LSContactGenderToGenderConst.bs","LsFalcoEventEntryPoint.bs","LsReplyRenderedFalcoEvent","MDSText.react","MDSTextPairing.react","MWChatReplyText.bs","MWLSActor.bs","MWV2ReplyContext.bs","MessagingAttachmentType.bs","ReQL.bs","ReQLSuspense.bs","ReQLTable","TetraIcon.react","bs_belt_Option","bs_caml","bs_caml_obj","bs_curry","bs_int64","fbicon","getFBTSafeGenderFromGenderConst","react","stylex","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={container:{borderTop:"l6v480f0",backgroundColor:"nred35xi",paddingEnd:"oj5qckz4",paddingStart:"lb8aey2d",paddingTop:"jktsbyx5",paddingBottom:"pby63qed",display:"j83agx80",justifyContent:"i1fnvgqd",alignItems:"ll8tlv6m"},message:{marginEnd:"o3lre8g0"}};function m(a){var c=a.message,d=b("useReStore")();a=b("MWLSActor.bs").useActor(void 0);a=b("bs_caml").i64_eq(c.senderId,a);var e=b("ReQLSuspense.bs").first(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"contacts").asc,{hd:c.senderId,tl:0})},[d,JSON.stringify(c.senderId)])),f=b("ReQLSuspense.bs").first(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"attachments").asc,{hd:c.threadKey,tl:{hd:c.messageId,tl:0}})},[d,c.messageId,JSON.stringify(c.threadKey)]));k.useEffect(function(){b("LsReplyRenderedFalcoEvent").log(function(){return{funnel:{entry_point:b("LsFalcoEventEntryPoint.bs").messageActions}}})},[]);f=c.isUnsent?g._(/*FBT_CALL*/"Tin nh\u1eafn \u0111\u00e3 g\u1ee1"/*FBT_CALL*/):c.text!==void 0&&b("bs_caml_obj").caml_notequal(c.text,"")?k.jsx(b("MWChatReplyText.bs").make,{text:b("bs_belt_Option").getWithDefault(c.text,g._(/*FBT_CALL*/"Tin nh\u1eafn"/*FBT_CALL*/))}):f!==void 0?b("bs_caml").i64_eq(f.attachmentType,b("MessagingAttachmentType.bs").image)?g._(/*FBT_CALL*/"H\u00ecnh \u1ea3nh"/*FBT_CALL*/):b("bs_caml").i64_eq(f.attachmentType,b("MessagingAttachmentType.bs").sticker)?g._(/*FBT_CALL*/"Nh\u00e3n d\u00e1n"/*FBT_CALL*/):b("bs_caml").i64_eq(f.attachmentType,b("MessagingAttachmentType.bs").video)?g._(/*FBT_CALL*/"Video"/*FBT_CALL*/):b("bs_caml").i64_eq(f.attachmentType,b("MessagingAttachmentType.bs").animatedImage)?g._(/*FBT_CALL*/"T\u1ec7p GIF"/*FBT_CALL*/):g._(/*FBT_CALL*/"File \u0111\u00ednh k\u00e8m"/*FBT_CALL*/):g._(/*FBT_CALL*/"Tin nh\u1eafn"/*FBT_CALL*/);if(a)a=g._(/*FBT_CALL*/"\u0110ang tr\u1ea3 l\u1eddi ch\u00ednh m\u00ecnh"/*FBT_CALL*/);else if(e!==void 0){var h=e.firstName;a=g._(/*FBT_CALL*/{"*":"\u0110ang tr\u1ea3 l\u1eddi {name}"}/*FBT_CALL*/,[g._param("name",k.jsx(b("MDSText.react"),{type:"bodyLink4",children:h!==void 0?h:e.name}),[1,b("getFBTSafeGenderFromGenderConst")(b("LSContactGenderToGenderConst.bs").make(e.gender))])])}else a=g._(/*FBT_CALL*/"\u0110ang tr\u1ea3 l\u1eddi {Placeholder for an unknown user}"/*FBT_CALL*/,[g._param("Placeholder for an unknown user","Facebook User")]);return k.jsx("div",{className:(j||(j=b("stylex")))(l.message),children:k.jsx(b("MDSTextPairing.react"),{body:k.jsx(k.Fragment,{children:k.jsx(b("MDSText.react"),{type:"body4",children:a})}),meta:f,level:3})})}d={make:m};function a(a){var c=a.message;a=k.useContext(b("MWV2ReplyContext.bs").context);var d=a.clearReply,e=k.useContext(b("CometTriggerAccessibilityAlertContext"));return k.jsxs("div",{className:(j||(j=b("stylex")))(l.container),"data-testid":"mw_composer_reply_view",children:[k.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return k.jsx(b("MDSText.react"),{type:"body4",children:g._(/*FBT_CALL*/"\u0110ang tr\u1ea3 l\u1eddi tin nh\u1eafn"/*FBT_CALL*/)})},children:k.jsx(m,{message:c})}),k.jsx(b("TetraIcon.react"),{"aria-label":g._(/*FBT_CALL*/"H\u1ee7y c\u00e2u tr\u1ea3 l\u1eddi"/*FBT_CALL*/),icon:b("fbicon")._(h("478231"),12),onPress:function(a){b("bs_curry")._2(d,c.threadKey,!0);return b("bs_curry")._2(e,g._(/*FBT_CALL*/"\u0110\u00e3 h\u1ee7y tin nh\u1eafn tr\u1ea3 l\u1eddi."/*FBT_CALL*/).toString(),{assertive:!1})},color:"primary"})]})}var n=k.memo(a);e={make:n};function c(a){var c=a.thread,d=a.messageId,e=a.messageTimestamp,f=b("useReStore")();a=b("ReQLSuspense.bs").first(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(f,"messages").asc,{hd:c.threadKey,tl:{hd:e,tl:{hd:d,tl:0}}})},[f,b("bs_int64").to_string(c.threadKey),d,JSON.stringify(e)]));if(a!==void 0)return k.jsx(n,{message:a});else return null}a=c;f.styles=l;f.Inner=d;f.Container=e;f.make=a}),null);
__d("messengerMentionsLexicalCreateNodeStrategy",["MessengerLexicalActorNode","cometBaseMentionsLexicalCreateNodeStrategy"],(function(a,b,c,d,e,f,g){"use strict";a=c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){var b=a.id;a=a.text;return d("MessengerLexicalActorNode").createMessengerLexicalActorNode({id:b,text:a})});b=a;g["default"]=b}),98);
__d("MessengerMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react",["CometMentionsForLexical.react","MWChatComposerMentionsViewItem.react","messengerMentionsLexicalCreateNodeStrategy","react","useMWChatMentionsDataSourceResolverConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo;function a(a){var b=a.editor,d=a.participants,e=a.threadFBID;a=i(function(){return{participants:d,threadFBID:e}},[d,e]);a=c("useMWChatMentionsDataSourceResolverConfig")(a);return h.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("messengerMentionsLexicalCreateNodeStrategy"),dataSourceResolverConfig:a,editor:b,position:"above",viewItemStrategyRenderer:c("MWChatComposerMentionsViewItem.react")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMessengerComposerInner.react",["fbt","CometLexicalContentEditable.react","CometLexicalPlaceholder.react","DEPRECATED_useLexicalCanShowPlaceholder","MessengerMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react","cr:2012305","react","requireDeferred","stylex","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useCallback,k=c("requireDeferred")("CometMessengerHandlePastedFileComposerPlugin").__setRef("CometMessengerComposerInner.react"),l={container:{backgroundColor:"b3i9ofy5",borderTopStartRadius:"orhb3f3m",borderTopEndRadius:"czkt41v7",borderBottomEndRadius:"fmqxjp7s",borderBottomStartRadius:"emzo65vh",boxSizing:"rq0escxv",flexGrow:"buofh1pr",minWidth:"hpfvmrgz"},editor:{flexGrow:"buofh1pr",maxHeight:"tw4czcav",minHeight:"cehpxlet",minWidth:"hpfvmrgz",overflowY:"eg9m0zos"},editorWrapper:{display:"j83agx80",flexGrow:"buofh1pr",marginEnd:"nhadk0th",marginStart:"ozuftl9m",marginTop:"aov4n071",marginBottom:"bi6gxh9e",minWidth:"hpfvmrgz",position:"l9j0dhe7"},inputRow:{display:"j83agx80",flexWrap:"lhclo0ds",justifyContent:"bkfpd7mw"}};function m(a,c){b("cr:2012305")!==null&&a!=null&&b("cr:2012305").trackTypingPerf(a,"MWChatComposer",c,{editor:"OutlineEditor"})}var n=h._(/*FBT_CALL*/"Tin nh\u1eafn"/*FBT_CALL*/).toString();function a(a){var b=a.ariaDescribedBy,d=a.contentEditableRef,e=a.editor,f=a.endContent,g=a.handlePastedFiles,h=a.participants,o=a.startContent,p=a.testId,q=a.threadID,r=a.topContent;a=a.useMentionsPlugin;var s=j(function(a){var b=d.current;if(a==null||b===a)return;d.current=a;e.setRootElement(a);m(a,b)},[d,e]),t=c("DEPRECATED_useLexicalCanShowPlaceholder")(e),u=c("useDeferredModuleOnReady")(k);return i.jsxs("div",{className:c("stylex")(l.container),children:[r,i.jsxs("div",{className:c("stylex")(l.inputRow),children:[o,i.jsxs("div",{className:c("stylex")(l.editorWrapper),children:[i.jsx(c("CometLexicalContentEditable.react"),{ariaDescribedBy:b,ariaLabel:n,contentEditableRef:s,editor:e,spellCheck:!0,tabIndex:0,webDriverTestID:p,xstyle:l.editor}),t&&i.jsx(c("CometLexicalPlaceholder.react"),{children:"Aa"})]}),f]}),a&&i.jsx(c("MessengerMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react"),{editor:e,participants:h,threadFBID:q}),u==null?null:i.jsx(u,{editor:e,handlePastedFiles:g})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatComposerShareFileCallout.bs",["MWChatComposerShareFileCallout.bs","bs_belt_Option","bs_caml_obj","bs_caml_option","bs_curry","react","usePrevious"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c){var d=b("MWChatComposerShareFileCallout.bs").isOpenedFromSharingEntrypoint(a);a=h.useState(function(){return d});var e=a[1];h.useEffect(function(){d&&b("bs_curry")._1(e,function(a){return!0})},[d]);var f=b("usePrevious")(c);f=f==null?void 0:b("bs_caml_option").some(f);var g=b("bs_belt_Option").isSome(f)&&b("bs_caml_obj").caml_notequal(f,c);h.useEffect(function(){g&&b("bs_curry")._1(e,function(a){return!1})},[g]);f=b("MWChatComposerShareFileCallout.bs").useCallout(a[0],e);a=h.useRef(null);if(c)return[f,a];else return[a,f]}f.useHook=a}),null);
__d("LSHotEmojiSize.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];f.none=a;f.small=c;f.medium=d;f.large=e}),null);
__d("XStickerAssetController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/asset/",{sticker_id:{type:"Int",required:!0},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}})}),null);
__d("MessengerHotLikeUtils",["EmojiLikeConstants","StickerConstants","XStickerAssetController"],(function(a,b,c,d,e,f,g){"use strict";var h={small:1e3,medium:2e3,large:3e3};function a(a){var b=c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;switch(!0){case a<h.small:b=c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;break;case a<h.medium:b=c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID;break;case a<h.large:b=c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID;break}return b}function b(a){var b=d("EmojiLikeConstants").size.SMALL;a<h.small?b=d("EmojiLikeConstants").size.SMALL:a<h.medium?b=d("EmojiLikeConstants").size.MEDIUM:a<h.large&&(b=d("EmojiLikeConstants").size.LARGE);return b}function e(a){var b;switch(a){case c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID:b=120;break;case c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID:b=84;break;case c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID:b=35;break;case d("EmojiLikeConstants").size.LARGE:b=64;break;case d("EmojiLikeConstants").size.MEDIUM:b=64;break;case d("EmojiLikeConstants").size.SMALL:b=32;break}return b?{height:b,width:b}:void 0}function f(){return c("XStickerAssetController").getURIBuilder().setInt("sticker_id",c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID).setEnum("image_type","BestEffortImage").getURI().toString()}function i(a){return c("XStickerAssetController").getURIBuilder().setInt("sticker_id",a).setEnum("image_type","BestEffortImage").getURI().toString()}function j(a){return a&&a.custom_like_icon}g.SizeTimes=h;g.getStickerIDForTime=a;g.getEmojiSizeForTime=b;g.getMetadataForHotLike=e;g.getPreviewURI=f;g.getURIWithID=i;g.getCustomEmojiFromThread=j}),98);
__d("MWV2ChatGrowingHotlikeButton.bs",["fbt","CometEmoji.bs","CometPressable.react","EmojiRenderer","LSHotEmojiSize.bs","MWChatChatButtonColorConstants.bs","MWChatHotLikeEmitterContext.bs","MWLikeSvgIcon.bs","MWTooltip.react","MessengerHotLikeUtils","bs_caml_format","bs_caml_option","bs_curry","clearTimeout","gkx","react","setTimeout","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={hotlikeButtonFDS:{paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginEnd:"cgat1ltu",marginStart:"kkf49tns"},hotlikeButtonMDS:{paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginEnd:"oi9244e8",marginStart:"h676nmdw"},customEmojiButtonFDS:{paddingTop:"cxgpxx05",paddingBottom:"sj5x9vvc",paddingEnd:"s5rnanwd",paddingStart:"gxklfzlk",marginEnd:"cgat1ltu",marginStart:"kkf49tns"},customEmojiButtonMDS:{paddingTop:"cxgpxx05",paddingBottom:"sj5x9vvc",paddingEnd:"s5rnanwd",paddingStart:"gxklfzlk",marginEnd:"oi9244e8",marginStart:"h676nmdw"}};function a(a){var c=a.onSendMessage,d=a.color,e=a.thread;a=a.disabled;a=a!==void 0?a:!1;var f=e.customEmoji,h=b("MWChatHotLikeEmitterContext.bs").useHook(void 0);e=j.useState(function(){return 0});var l=e[1],m=e[0],n=j.useRef(void 0);e=j.useState(function(){return!0});var o=e[1];e=e[0];var p=function(a){return b("bs_curry")._1(h.notify,3)},q=function(a){a=n.current;if(a!==void 0){b("clearTimeout")(b("bs_caml_option").valFromOption(a));return}},r=function(a){q(void 0);a=b("setTimeout")(p,3e3);n.current=b("bs_caml_option").some(a)},s=function(a){if(m!==0){b("bs_curry")._1(l,function(a){return 0});q(void 0);return b("bs_curry")._1(h.notify,3)}},t=function(a){m!==0&&(a.stopPropagation(),a.preventDefault());a.button!==0&&(b("bs_curry")._1(l,function(a){return Date.now()}),b("bs_curry")._1(h.notify,0),r(void 0));return b("bs_curry")._1(o,function(a){return!1})},u=function(a){if(a<b("MessengerHotLikeUtils").SizeTimes.small)return b("LSHotEmojiSize.bs").small;else if(a<b("MessengerHotLikeUtils").SizeTimes.medium)return b("LSHotEmojiSize.bs").medium;else if(a<b("MessengerHotLikeUtils").SizeTimes.large)return b("LSHotEmojiSize.bs").large;else return b("LSHotEmojiSize.bs").small},v=function(a){a=Date.now()-m;var d=0;if(f!==void 0&&f!==""){var e=u(a);b("bs_curry").app(c,[f,void 0,void 0,e,void 0,void 0,void 0,void 0,void 0,void 0,void 0])}else d=1;if(d===1){e=b("bs_caml_format").caml_int64_of_string(b("MessengerHotLikeUtils").getStickerIDForTime(a));b("bs_curry").app(c,[void 0,void 0,e,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0])}m!==0&&(b("bs_curry")._1(l,function(a){return 0}),q(void 0),b("bs_curry")._1(h.notify,1));return b("bs_curry")._1(o,function(a){return!0})};if(f!==void 0&&f!==""){var w=g._(/*FBT_CALL*/"G\u1eedi {emoji}"/*FBT_CALL*/,[g._param("emoji",f)]),x=function(a){var c=b("EmojiRenderer").parse(f).map(function(a){return a.emoji});if(c.length!==1)return j.jsx("span",{children:f});c=c[0];return j.jsx(b("CometEmoji.bs").make,{emoji:c,size:a})},y=g._(/*FBT_CALL*/"G\u1eedi"/*FBT_CALL*/);y=e?j.jsxs(j.Fragment,{children:[j.jsxs("span",{children:[y," "]}),x(16)]}):null;return j.jsx(b("MWTooltip.react"),{tooltip:y,align:"middle",position:"above",children:j.jsx(b("CometPressable.react"),{"aria-label":w,disabled:a,testid:"messenger_hotlike_emoji_button",onHoverOut:s,onPressIn:t,onPress:v,overlayDisabled:a,overlayRadius:"50%",xstyle:function(a){return[b("gkx")("571")?k.customEmojiButtonMDS:k.customEmojiButtonFDS]},children:x(20)})})}y=g._(/*FBT_CALL*/"G\u1eedi l\u01b0\u1ee3t th\u00edch"/*FBT_CALL*/);w=e?y:null;x={className:(i||(i=b("stylex")))(b("MWChatChatButtonColorConstants.bs").styles.fillGrey),size:"20"};d!==void 0&&(x.color=d);return j.jsx(b("MWTooltip.react"),{tooltip:w,align:"middle",position:"above",children:j.jsx(b("CometPressable.react"),{"aria-label":y,disabled:a,testid:"messenger_hotlike_button",onHoverOut:s,onPressIn:t,onPress:v,overlayDisabled:a,overlayRadius:"50%",xstyle:function(a){return[b("gkx")("571")?k.hotlikeButtonMDS:k.hotlikeButtonFDS]},children:j.jsx(b("MWLikeSvgIcon.bs").make,x)})})}c=a;f.styles=k;f.make=c}),null);
__d("MWV2ComposerEmojiButton.bs",["fbt","CometLazyPopoverTrigger.react","CometPopoverLoadingState.react","CometPressable.react","JSResource","JSResourceForInteraction","MWChatComposerIcons.bs","MWTooltip.react","Promise","bs_curry","gkx","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j=g._(/*FBT_CALL*/"Ch\u1ecdn bi\u1ec3u t\u01b0\u1ee3ng c\u1ea3m x\u00fac"/*FBT_CALL*/),k={buttonFDS:{paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus"},buttonMDS:{paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr"}},l=b("JSResource")("CometAddEmojiToComposerForLexical.bs").__setRef("MWV2ComposerEmojiButton.bs");function a(a){var c=a.editor,d=a.color;a=function(a){b("promiseDone")(l.load().then(function(d){b("bs_curry")._3(d.make,a,c,16);return b("Promise").resolve(void 0)}),void 0,void 0)};return i.jsx(b("CometLazyPopoverTrigger.react"),{fallback:i.jsx(b("CometPopoverLoadingState.react"),{withArrow:!0}),popoverResource:b("JSResourceForInteraction")("MWV2ComposerEmojiPickerForJSResource",{name:"MWV2ComposerEmojiPicker","class":"fluid"}).__setRef("MWV2ComposerEmojiButton.bs"),popoverProps:{onSelect:a,withArrow:!0},align:"end",children:function(a,c,e,f,g,h,m){return i.jsx(b("MWTooltip.react"),{tooltip:j,align:"middle",position:"above",children:i.jsx(b("CometPressable.react"),{"aria-label":j,ref:a,testid:"composer_emoji_picker",onHoverIn:b("bs_curry").__1(f),onHoverOut:function(a){return b("bs_curry")._1(g,void 0)},onPressIn:b("bs_curry").__1(h),onPress:function(a){b("bs_curry")._1(c,void 0),l.preload()},overlayRadius:"50%",xstyle:function(a){return[b("gkx")("571")?k.buttonMDS:k.buttonFDS]},children:i.jsx(b("MWChatComposerIcons.bs").Emoji.make,{size:20,fill:d})})})}})}c=a;f.label=j;f.styles=k;f.cometAddEmojiToComposerForLexical=l;f.make=c}),null);
__d("MWChatFileIcon.bs",["ix","TetraIcon.react","fbicon","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={icon:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginEnd:"o3lre8g0",backgroundColor:"hybvsw6c",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv"}};function a(a){return j.jsx("div",{className:(i||(i=b("stylex")))(k.icon),children:j.jsx(b("TetraIcon.react"),{icon:b("fbicon")._(g("908355"),16),color:"primary"})})}c=a;f.styles=k;f.make=c}),null);
__d("MWV2ComposerMediaProgressBar.bs",["MWPThreadTheme.bs","MWV2ColorUtils.bs","bs_js_math","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={progressBar:{position:"pmk7jnqg",bottom:"i09qtzwb",start:"j9ispegn",width:"k4urcfbm"}};function a(a){var c=a.mediaStaging;a=a.height;var d=b("MWPThreadTheme.bs").useHook(void 0);d=c.hasError?"var(--negative)":b("MWV2ColorUtils.bs").int64ToHex(d.threadTheme.fallbackColor);c=b("bs_js_math").ceil(c.progress*100);var e=(a/2).toString();e="M 0,"+e+" L 100,"+e;return i.jsxs("svg",{viewBox:"0 0 100 "+a.toString(),preserveAspectRatio:"none",className:(h||(h=b("stylex")))(j.progressBar),style:{height:a.toString()},children:[i.jsx("path",{d:e,stroke:"rgba(0,0,0,.5)",strokeWidth:a.toString(),strokeLinecap:"round"}),i.jsx("path",{d:e,stroke:d,strokeWidth:(c===0?0:a).toString(),strokeLinecap:"round",style:{transition:"stroke-dashoffset .5s, stroke .5s",strokeDasharray:"100",strokeDashoffset:(100-c|0).toString()}})]})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2ComposerMediaStaging.bs",["fbt","ix","CometFileSelector.re","CometImage.react","CometImageCover.react","CometPressable.react","MDSText.react","MWChatFileIcon.bs","MWV2ComposerFileButton.bs","MWV2ComposerMediaProgressBar.bs","MessagingAttachmentType.bs","TetraCircleButton.react","TetraIcon.react","bs_caml","bs_caml_option","bs_curry","fbicon","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={root:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",flexGrow:"kb5gq1qc",flexShrink:"pfnyh3mw",height:"m7zwrmfr",width:"tmrshh9y",marginEnd:"tvfksri0",position:"l9j0dhe7",backgroundColor:"n1jkxfxr",borderTopStartRadius:"fni8adji",borderTopEndRadius:"hgaippwi",borderBottomEndRadius:"fykbt5ly",borderBottomStartRadius:"ns4ygwem"}};function m(a){var c=a.supportedFileTypes;a=a.onAttachmentsAdded;a=b("MWV2ComposerFileButton.bs").useOnFilesSelected(a);a={children:function(a){return k.jsx(b("CometPressable.react"),{"aria-label":g._(/*FBT_CALL*/"T\u1ea3i \u1ea3nh\/video kh\u00e1c l\u00ean"/*FBT_CALL*/),onPress:function(c){return b("bs_curry")._1(a,void 0)},xstyle:function(a){return[l.root]},children:k.jsx(b("TetraIcon.react"),{icon:b("fbicon")._(h("481777"),24),testid:"composer_attachment_area_photo_uploader",color:"primary"})})},multiple:!0,onFilesSelected:a};c!==void 0&&(a.accept=b("bs_caml_option").valFromOption(c));return k.jsx(b("CometFileSelector.re").make,a)}c={styles:l,make:m};var n={button:{position:"pmk7jnqg",top:"nezaghv5",end:"e712q9ov"}};function o(a){var c=a.onPress;return k.jsx("div",{className:(j||(j=b("stylex")))(n.button),children:k.jsx(b("TetraCircleButton.react"),{icon:b("fbicon")._(h("478231"),12),label:g._(/*FBT_CALL*/"G\u1ee1 file \u0111\u00ednh k\u00e8m"/*FBT_CALL*/),onPress:function(a){return b("bs_curry")._1(c,void 0)},size:24,type:"overlay"})})}d={styles:n,make:o};var p={video:{objectFit:"bixrwtb6"},playIcon:{position:"pmk7jnqg",start:"kfkz5moi",top:"rk01pc8j",marginStart:"fnu23jab",marginTop:"gy6hb44f"},file:{display:"j83agx80",alignItems:"bp9cbjyn",userSelect:"abiwlrkh",paddingTop:"ecm0bbzt",paddingBottom:"e5nlhep0",paddingEnd:"dflh9lhu",paddingStart:"scb9dxdr"},fileContent:{flexGrow:"buofh1pr"}};function q(a){a=a.mediaStaging;var c=a.attachmentType;if(b("bs_caml").i64_eq(c,b("MessagingAttachmentType.bs").video)){var d=a.previewUrl;if(d!==void 0)return k.jsxs(k.Fragment,{children:[k.jsx("video",{src:d,width:"48",height:"48",className:(j||(j=b("stylex")))(p.video)}),k.jsx("div",{className:j(p.playIcon),children:k.jsx(b("CometImage.react"),{src:h("354763")})})]});else return null}if(!b("bs_caml").i64_eq(c,b("MessagingAttachmentType.bs").image))return k.jsxs("div",{className:(j||(j=b("stylex")))(p.file),children:[k.jsx(b("MWChatFileIcon.bs").make,{}),k.jsx("div",{className:j(p.fileContent),children:k.jsx(b("MDSText.react"),{type:"headline4",numberOfLines:2,children:a.filename})})]});d=a.previewUrl;if(d!==void 0)return k.jsx(b("CometImageCover.react"),{alt:"",src:d});else return null}e={styles:p,make:q};var r={itemContainer:{flexGrow:"kb5gq1qc",flexShrink:"pfnyh3mw",height:"m7zwrmfr",width:"tmrshh9y",marginTop:"rs0gx3tq",marginEnd:"tvfksri0",marginBottom:"w0hvl6rk",marginStart:"hcukyx3x",position:"l9j0dhe7"},previewContainer:{position:"l9j0dhe7",overflowX:"ni8dbmo4",overflowY:"stjgntxs",height:"m7zwrmfr",width:"tmrshh9y",borderTopStartRadius:"fni8adji",borderTopEndRadius:"hgaippwi",borderBottomEndRadius:"fykbt5ly",borderBottomStartRadius:"ns4ygwem"},fileContainer:{width:"k5ud4834"},filePreviewContainer:{width:"k5ud4834",backgroundColor:"acsorfik"}};function s(a){var c=a.mediaStaging,d=a.onAttachmentRemoved;a=k.useCallback(function(a){return b("bs_curry")._1(d,c.offlineAttachmentId)},[]);var e=b("bs_caml").i64_neq(c.attachmentType,b("MessagingAttachmentType.bs").video)&&b("bs_caml").i64_neq(c.attachmentType,b("MessagingAttachmentType.bs").image);return k.jsxs("div",{className:(j||(j=b("stylex")))(r.itemContainer,e?r.fileContainer:!1),children:[k.jsxs("div",{className:j(r.previewContainer,e?r.filePreviewContainer:!1),children:[k.jsx(q,{mediaStaging:c}),k.jsx(b("MWV2ComposerMediaProgressBar.bs").make,{mediaStaging:c,height:4})]}),k.jsx(o,{onPress:a})]})}var t={styles:r,make:s},u={container:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"jifvfom9",flexWrap:"owycx6da",paddingTop:"pybr56ya",paddingEnd:"d1544ag0",paddingBottom:"f10w8fjw",paddingStart:"tw6a2znq",overflowX:"d76ob5m9",width:"k4urcfbm",boxSizing:"rq0escxv"}};function a(a){var c=a.mediaStaging,d=a.onAttachmentRemoved,e=a.onAttachmentsAdded;a=a.supportedFileTypes;if(c.length===0)return null;else return k.jsxs("div",{className:(j||(j=b("stylex")))(u.container),children:[c.map(function(a){return k.jsx(s,{mediaStaging:a,onAttachmentRemoved:d},a.offlineAttachmentId)}),k.jsx(m,{supportedFileTypes:a,onAttachmentsAdded:e})]})}a=a;f.UploadPlaceholder=c;f.CloseButton=d;f.Preview=e;f.StagingItem=t;f.styles=u;f.make=a}),null);
__d("MWV2ComposerPersistentMenuButton.bs",["fbt","CometLazyPopoverTrigger.react","CometPressable.react","FBID.bs","JSResource","MWChatChatButtonColorConstants.bs","MWTooltip.react","bs_curry","bs_int64","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=g._(/*FBT_CALL*/"Xem menu t\u00f9y ch\u1ecdn"/*FBT_CALL*/),l={buttonFDS:{flexShrink:"pfnyh3mw",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginEnd:"cgat1ltu",marginStart:"kkf49tns"},buttonMDS:{flexShrink:"pfnyh3mw",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginEnd:"oi9244e8",marginStart:"h676nmdw"}};function a(a){var c=a.thread,d=a.color,e=a.onSendMessage;a=a.disabled;var f=a!==void 0?a:!1;a=function(a){var c=a.title;a=a.id;return b("bs_curry").app(e,[c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,void 0])};return j.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResource")("LSComposerPersistentMenu.react").__setRef("MWV2ComposerPersistentMenuButton.bs"),popoverProps:{onClose:function(a){},onSelect:a,pageId:b("FBID.bs").ofStringExn(b("bs_int64").to_string(c.threadKey))},align:"end",children:function(a,c,e,g,h,m,n){return j.jsx(b("MWTooltip.react"),{tooltip:k,position:"above",children:j.jsx(b("CometPressable.react"),{disabled:f,label:k,ref:a,onPress:function(a){return b("bs_curry")._1(c,void 0)},overlayDisabled:f,overlayRadius:"50%",xstyle:function(a){return[b("gkx")("571")?l.buttonMDS:l.buttonFDS]},children:j.jsx("svg",{className:(i||(i=b("stylex")))(b("MWChatChatButtonColorConstants.bs").styles.strokeGrey),width:"20",height:"20",viewBox:"0 0 24 18",children:j.jsxs("g",{stroke:d,strokeWidth:"2.5",strokeLinecap:"round",children:[j.jsx("path",{d:"M1.5,1.5 H22.5"}),j.jsx("path",{d:"M1.5,9 H22.5"}),j.jsx("path",{d:"M1.5,16.5 H22.5"})]})})}),forceInlineDisplay:!0})}})}c=a;f.make=c}),null);
__d("Navigator.bs",["bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=navigator.permissions;if(c==null)return;var d=c.query;if(!(d==null))return b("bs_caml_option").nullable_to_opt(d.call(c,a))}f.query=a}),null);
__d("MWV2ComposerPlusButton.bs",["fbt","CometLazyPopoverTrigger.react","CometPressable.react","JSResourceForInteraction","MWChatComposerIcons.bs","MWTooltip.react","Navigator.bs","Promise","bs_caml_option","bs_curry","gkx","react","requireDeferred","useCometLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j=b("requireDeferred")("MWChatAudioLog.bs").__setRef("MWV2ComposerPlusButton.bs");function k(a){var c=i.useState(function(){return 0}),d=c[1],e=c[0];c=b("useCometLazyDialog")(b("JSResourceForInteraction")("MWChatAudioRecorderPermissionsDialog").__setRef("MWV2ComposerPlusButton.bs"));var f=c[0],g=function(a){return f({onClose:function(a){},onAllow:function(a){},showNoPermissionsContent:!0},function(a){})},h=function(c){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(c){d(function(a){return 1});b("bs_curry")._1(a.start,c);return b("Promise").resolve(void 0)})["catch"](function(a){a.name==="NotAllowedError"?(d(function(a){return 2}),g(void 0)):d(function(a){return 3});j.onReady(function(a){return b("bs_curry")._1(a.logBrowserDenyAccess,void 0)});return b("Promise").resolve(void 0)})},k=function(a){return f({onClose:function(a){},onAllow:function(a){return h(void 0)},showNoPermissionsContent:!1},function(a){})};return function(a){if(e>=3)return h(void 0);switch(e){case 0:a=b("Navigator.bs").query({name:"microphone"});a!==void 0?b("bs_caml_option").valFromOption(a).then(function(a){a=a.state;switch(a){case"denied":d(function(a){return 2});g(void 0);break;case"granted":h(void 0);break;case"prompt":k(void 0);break;default:k(void 0)}return b("Promise").resolve(void 0)})["catch"](function(a){k(void 0);return b("Promise").resolve(void 0)}):(h(void 0),j.onReady(function(a){return b("bs_curry")._1(a.logMicAccessCheckFailed,void 0)}));return;case 1:return h(void 0);case 2:return g(void 0)}}}var l={plusButtonFDS:{paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus",marginTop:"aahdfvyu",marginBottom:"tvmbv18p",marginEnd:"cgat1ltu",marginStart:"kkf49tns"},plusButtonMDS:{paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginStart:"h676nmdw"}};function a(a){var c=a.thread,d=a.color,e=a.onSendMessage,f=a.onAttachmentsAdded,h=a.voiceRecorder,m=a.supportedFileTypes;a=a.isInputExpanded;var n=i.useState(function(){return!1}),o=n[1],p=function(a){return b("bs_curry")._1(o,function(b){return a})},q=k(h),r=h.state!==0,s=r?g._(/*FBT_CALL*/"\u0110\u00f3ng"/*FBT_CALL*/):n[0]?g._(/*FBT_CALL*/"\u0110\u00f3ng th\u00eam h\u00e0nh \u0111\u1ed9ng"/*FBT_CALL*/):g._(/*FBT_CALL*/"M\u1edf h\u00e0nh \u0111\u1ed9ng kh\u00e1c"/*FBT_CALL*/);return i.jsx(b("CometLazyPopoverTrigger.react"),{onVisibilityChange:p,popoverResource:b("JSResourceForInteraction")("MWV2ComposerOverflowMenu").__setRef("MWV2ComposerPlusButton.bs"),popoverProps:{threadKey:c.threadKey,color:d,onSendMessage:e,onAttachmentsAdded:f,onPressVoiceClip:q,supportedFileTypes:m,isInputExpanded:a,onClose:function(a){}},align:"start",position:"above",preloadTrigger:"button",children:function(a,c,e,f,g,k,m){return i.jsx(b("MWTooltip.react"),{tooltip:s,align:"middle",position:"above",children:i.jsx(b("CometPressable.react"),{"aria-label":s,ref:a,testid:"composer_actions_button",onHoverIn:b("bs_curry").__1(f),onHoverOut:function(a){return b("bs_curry")._1(g,void 0)},onPressIn:b("bs_curry").__1(k),onPress:function(a){if(r){b("bs_curry")._1(h.reset,void 0);j.onReady(function(a){return b("bs_curry")._1(a.logDeleteRecording,void 0)});return}else return b("bs_curry")._1(c,void 0)},overlayRadius:"50%",xstyle:function(a){return[b("gkx")("571")?l.plusButtonMDS:l.plusButtonFDS]},children:i.jsx(b("MWChatComposerIcons.bs").MoreActions.make,{size:20,fill:d,isRotated:r})})})}})}c=a;f.$MWChatAudioLog$Deferred=j;f.styles=l;f.make=c}),null);
__d("MWV2ComposerSendButton.bs",["fbt","CometPressable.react","MWChatChatButtonColorConstants.bs","MWTooltip.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=g._(/*FBT_CALL*/"Nh\u1ea5n Enter \u0111\u1ec3 g\u1eedi"/*FBT_CALL*/),l={buttonFDS:{flexShrink:"pfnyh3mw",flexGrow:"kb5gq1qc",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginEnd:"cgat1ltu",marginStart:"kkf49tns"},buttonMDS:{flexShrink:"pfnyh3mw",flexGrow:"kb5gq1qc",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginEnd:"oi9244e8",marginStart:"h676nmdw"}};function a(a){var c=a.color,d=a.onPress;a=a.disabled;a=a!==void 0?a:!1;return j.jsx(b("MWTooltip.react"),{tooltip:k,align:"middle",position:"above",children:j.jsx(b("CometPressable.react"),{disabled:a,label:k,testid:"chat_send_button",onPress:d,overlayDisabled:a,overlayRadius:"50%",xstyle:function(a){return[b("gkx")("571")?l.buttonMDS:l.buttonFDS]},children:j.jsx("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",className:(i||(i=b("stylex")))(b("MWChatChatButtonColorConstants.bs").styles.fillGrey),children:j.jsx("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",fill:c})})}),forceInlineDisplay:!0})}c=a;f.make=c}),null);
__d("MWV2ComposerVoiceRecorder.bs",["fbt","CometComponentWithKeyCommands.react","CometKeys","CometPressable.react","MWPThreadTheme.bs","bs_caml_option","bs_curry","cancelAnimationFrame","formatDurationSeconds","react","requestAnimationFrameAcrossTransitions","requireDeferred","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=b("requireDeferred")("MWChatAudioLog.bs").__setRef("MWV2ComposerVoiceRecorder.bs");function l(a){var b=a.currentTime;a=a.duration;return j.jsx("div",{style:{position:"absolute"},role:"slider",tabIndex:0,"aria-label":g._(/*FBT_CALL*/"Thanh k\u00e9o \u00e2m thanh"/*FBT_CALL*/),"aria-valuenow":b,"aria-valuemin":0,"aria-valuemax":a})}c={make:l};function m(a){var c=a.audioEl;a=a.children;var d=j.useCallback(function(a){if(a>30)return 5;else if(a>10)return 3;else if(a>5)return 2;else if(a>2)return 1;else return.5},[]),e=j.useCallback(function(a){a=c.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a);var e=a.duration;a.currentTime=a.currentTime-b("bs_curry")._1(d,e)},[d]),f=j.useCallback(function(a){a=c.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a);var e=a.duration;a.currentTime=a.currentTime+b("bs_curry")._1(d,e)},[d]),h=j.useCallback(function(a){a=c.current;if(a!==void 0){b("bs_caml_option").valFromOption(a).currentTime=0;return}},[]),i=j.useCallback(function(a){a=c.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a);var d=a.duration;a.currentTime=d},[]),k=j.useMemo(function(){var a;return[{command:{key:(a=b("CometKeys")).UP},description:g._(/*FBT_CALL*/"T\u0103ng gi\u00e1 tr\u1ecb thanh tr\u01b0\u1ee3t th\u00eam 1 b\u1eadc n\u1eefa."/*FBT_CALL*/),handler:f},{command:{key:a.DOWN},description:g._(/*FBT_CALL*/"Gi\u1ea3m gi\u00e1 tr\u1ecb thanh tr\u01b0\u1ee3t xu\u1ed1ng 1 b\u1eadc n\u1eefa."/*FBT_CALL*/),handler:e},{command:{key:a.LEFT},description:g._(/*FBT_CALL*/"Gi\u1ea3m gi\u00e1 tr\u1ecb thanh tr\u01b0\u1ee3t xu\u1ed1ng 1 b\u1eadc n\u1eefa."/*FBT_CALL*/),handler:e},{command:{key:a.RIGHT},description:g._(/*FBT_CALL*/"T\u0103ng gi\u00e1 tr\u1ecb thanh tr\u01b0\u1ee3t th\u00eam 1 b\u1eadc."/*FBT_CALL*/),handler:f},{command:{key:a.HOME},description:g._(/*FBT_CALL*/"\u0110\u1eb7t gi\u00e1 tr\u1ecb thanh tr\u01b0\u1ee3t \u1edf m\u1ee9c t\u1ed1i thi\u1ec3u."/*FBT_CALL*/),handler:h},{command:{key:a.END},description:g._(/*FBT_CALL*/"\u0110\u1eb7t gi\u00e1 tr\u1ecb thanh tr\u01b0\u1ee3t \u1edf m\u1ee9c t\u1ed1i \u0111a."/*FBT_CALL*/),handler:i}]},[e,f,h,i]);return j.jsx(b("CometComponentWithKeyCommands.react"),{commandConfigs:k,children:a})}d={make:m};var n={timer:{marginEnd:"fv0vnmcu",marginStart:"ggphbty4",height:"oeo4gz9l",width:"chsygg5i",backgroundColor:"q2y6ezfg",borderTopStartRadius:"pdihbav5",borderTopEndRadius:"fo8ltl2p",borderBottomEndRadius:"b8f6b1oh",borderBottomStartRadius:"q0b78ich",display:"j83agx80",justifyContent:"taijpn5t",alignItems:"bp9cbjyn",fontSize:"e9vueds3",fontWeight:"lrazzd5p",cursor:"nhd2j8a9",userSelect:"abiwlrkh",position:"l9j0dhe7"}},o=j.memo(function(a){var c=a.time;a=a.color;a=a!==void 0?a:"black";c=b("formatDurationSeconds")(c);a={color:a};return j.jsx("div",{"data-testid":"mw_recorder_timestamp",className:(i||(i=b("stylex")))(n.timer),style:a,children:c})});e={styles:n,make:o};var p={pressable:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",width:"b73ngqbp",height:"rgmg9uty",backgroundColor:"q2y6ezfg",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv"}};function q(a){var c=a.onPress,d=a.onHoverMove,e=a.label;a=a.icon;e={"aria-label":e,disabled:c===void 0,overlayRadius:"50%",xstyle:function(a){return[p.pressable]},children:a};d!==void 0&&(e.onHoverMove=b("bs_caml_option").valFromOption(d));c!==void 0&&(e.onPress=b("bs_caml_option").valFromOption(c));return j.jsx(b("CometPressable.react"),e)}var r={styles:p,make:q},s={highlight:{height:"datstx6m",width:"k4urcfbm",start:"j9ispegn",top:"kr520xx4",position:"pmk7jnqg",transform:"hp24h0cv"},outgoing:{opacity:"lupvgy83",backgroundColor:"q2y6ezfg"},incoming:{opacity:"h34q056n",backgroundColor:"rn3djb20"}},t=j.forwardRef(function(a,c){var d=a.style;a=a.outgoing;d=d!==void 0?b("bs_caml_option").valFromOption(d):{};var e=j.useRef(void 0);j.useImperativeHandle(c,function(){return{updateHighlight:function(a){var b=e.current;if(!(b==null)){b.style.transform="translateX("+(a-100).toFixed(1)+"%)";return}}}},[e]);return j.jsx("div",{ref:e,className:(i||(i=b("stylex")))(s.highlight,a?s.outgoing:s.incoming),style:d})}),u={styles:s,make:t};function v(a){var c=a.duration,d=a.audioEl,e=a.currentTime,f=a.isProgressing,g=a.isCompleted;a=a.outgoing;a=a!==void 0?a:!0;var h=j.useRef(void 0);j.useEffect(function(){var a=function(a){var b=h.current;if(!(b==null))return b.updateHighlight(a)};if(g){a(0);return}if(f){var e={contents:void 0},i={contents:void 0},j=function f(g){var h=d.current;if(h!==void 0){h=b("bs_caml_option").valFromOption(h);h=h.currentTime/h.duration}else{var j=e.contents;j=j!==void 0?g-j:(e.contents=g,0);h=j/(c*1e3)}g=Math.min(h*100,100);a(g);if(g<100){i.contents=b("bs_caml_option").some(b("requestAnimationFrameAcrossTransitions")(f));return}};i.contents=b("bs_caml_option").some(b("requestAnimationFrameAcrossTransitions")(j));return function(a){a=i.contents;if(a!==void 0){b("cancelAnimationFrame")(b("bs_caml_option").valFromOption(a));return}}}j=d.current;if(j!==void 0){j=b("bs_caml_option").valFromOption(j);j=j.currentTime/j.duration;a(j*100)}},[c,f,g,h,d,e]);return j.jsx(t,{style:{transform:"translateX(-100%)"},outgoing:a,ref:h})}var w={make:v};function x(a,b,c){return Math.min(Math.max(b,a),c)}var y={container:{flexGrow:"buofh1pr",display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"i1fnvgqd",height:"tv7at329",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"l9j0dhe7"}};function z(a){var c=a.scrubberRef,d=a.hasScrubber,e=a.audioEl,f=a.color,g=a.testid,h=a.style;a=a.children;h=h!==void 0?b("bs_caml_option").valFromOption(h):{};var k=j.useRef(void 0),l=function(a,b){b=b.getBoundingClientRect();a=a.clientX-b.left;a=a/b.width;return x(a,0,1)},m=function(a){var c=e.current,d=k.current;if(c===void 0)return;if(d==null)return;c=b("bs_caml_option").valFromOption(c);c.currentTime=l(a,d)*c.duration*100/100},n=function(a){var b=k.current,d=c.current;if(!(b==null)&&!(d==null))return d.updateHighlight(l(a,b)*100)},o=function(a){a=c.current;if(!(a==null))return a.updateHighlight(0)};return j.jsx("div",{ref:k,"data-testid":g,className:(i||(i=b("stylex")))(y.container),style:Object.assign({},{backgroundColor:f},h),onMouseMove:d?n:void 0,onMouseLeave:d?o:void 0,onClick:d?m:void 0,children:a})}var A={clamp:x,styles:y,make:z};function B(a){a=a.color;return j.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 36 36",children:j.jsx("path",{d:"M10 25.5v-15a1.5 1.5 0 012.17-1.34l15 7.5a1.5 1.5 0 010 2.68l-15 7.5A1.5 1.5 0 0110 25.5z",fill:a})})}var C={make:B};function D(a){a=a.color;return j.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 36 36",children:j.jsx("rect",{x:"9",y:"9",width:"18",height:"18",rx:"2",fill:a})})}var E={make:D};function F(a){a=a.color;return j.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 36 36",children:j.jsx("path",{d:"M11 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4zM21 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4z",fill:a})})}var G={make:F},H=g._(/*FBT_CALL*/"Ph\u00e1t"/*FBT_CALL*/),I=g._(/*FBT_CALL*/"D\u1eebng ghi \u00e2m"/*FBT_CALL*/),J=g._(/*FBT_CALL*/"T\u1ea1m d\u1eebng"/*FBT_CALL*/),K={playbackButtonContainer:{marginEnd:"fv0vnmcu",marginStart:"ggphbty4"}};function a(a){var c=a.voiceRecorder;a=b("MWPThreadTheme.bs").useBottom(void 0);var d=c.audioEl,e=c.state,f;if(typeof e==="number")f=!1;else switch(e.TAG|0){case 0:f=!1;break;case 1:case 2:f=!0;break}var g=j.useRef(void 0),h=function(a){var b=g.current;if(!(b==null)){a.stopPropagation();return b.updateHighlight(0)}},n=function(a){b("bs_curry")._1(c.toggle,e);if(typeof e==="number")return;switch(e.TAG|0){case 0:k.onReady(function(a){return b("bs_curry")._1(a.logClickStopRecording,0)});return;case 1:var d=e._1,f=e._0;d===0?k.onReady(function(a){return b("bs_curry")._1(a.logPlaybackStart,f)}):k.onReady(function(a){return b("bs_curry")._2(a.logPlaybackResume,f,d)});return;case 2:var g=e._1,h=e._0;k.onReady(function(a){return b("bs_curry")._2(a.logPlaybackPause,h,g)});return}},p;if(typeof e==="number")p=0;else switch(e.TAG|0){case 0:p=60;break;case 1:case 2:p=e._0;break}var r;if(typeof e==="number")r=void 0;else switch(e.TAG|0){case 0:r=void 0;break;case 1:case 2:r=e._1;break}var s;if(typeof e==="number")s=!1;else switch(e.TAG|0){case 1:s=!1;break;case 0:case 2:s=!0;break}var u;u=typeof e==="number"||e.TAG!==1?!1:e._1===0;u={duration:p,audioEl:d,isProgressing:s,isCompleted:u,outgoing:!0};r!==void 0&&(u.currentTime=b("bs_caml_option").valFromOption(r));var w,x=0;if(typeof e==="number")w=null;else switch(e.TAG|0){case 0:w=null;break;case 1:case 2:x=1;break}x===1&&(w=j.jsx(l,{currentTime:e._1,duration:e._0}));var y;if(typeof e==="number")y=H;else switch(e.TAG|0){case 0:y=I;break;case 1:y=H;break;case 2:y=J;break}var A;if(typeof e==="number")A=j.jsx(B,{color:a});else switch(e.TAG|0){case 0:A=j.jsx(D,{color:a});break;case 1:A=j.jsx(B,{color:a});break;case 2:A=j.jsx(F,{color:a});break}var C;x=0;if(typeof e==="number")C=0;else switch(e.TAG|0){case 0:C=e._1;break;case 1:case 2:x=1;break}x===1&&(C=Math.max(e._0-e._1,0));return j.jsx(z,{scrubberRef:g,hasScrubber:f,audioEl:d,color:a,testid:"mw_audio_recorder",style:{cursor:f?"pointer":"default",borderRadius:"18px"},children:j.jsxs(m,{audioEl:d,children:[j.jsx(v,u),w,j.jsx(t,{outgoing:!0,ref:g}),j.jsx("div",{onMouseMove:f?h:void 0,className:(i||(i=b("stylex")))(K.playbackButtonContainer),children:j.jsx(q,{onPress:n,label:y,icon:A})}),j.jsx(o,{time:C,color:a})]})})}a=a;f.$MWChatAudioLog$Deferred=k;f.ScreenreaderLabel=c;f.KeyCommands=d;f.Timer=e;f.PlaybackButton=r;f.Highlight=u;f.Progress=w;f.Container=A;f.PlayIcon=C;f.StopIcon=E;f.PauseIcon=G;f.playLabel=H;f.stopLabel=I;f.pauseLabel=J;f.styles=K;f.make=a}),null);
__d("MWV2UseVoiceRecorder.bs",["MWChatRecorderUtilsWorkerResource","MWConsole","Promise","WebWorker","bs_caml_option","bs_curry","clearTimeout","react","requireDeferred","setTimeout","useIsMountedRef","usePrevious"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("requireDeferred")("MWChatAudioLog.bs").__setRef("MWV2UseVoiceRecorder.bs");function j(a,b){if(typeof b==="number")switch(b){case 0:if(typeof a==="number")return a;switch(a.TAG|0){case 0:return{TAG:1,_0:a._1,_1:0};case 1:return{TAG:2,_0:a._0,_1:a._1};case 2:return{TAG:1,_0:a._0,_1:a._1}}case 1:return{TAG:1,_0:60,_1:0};case 2:return 0}else switch(b.TAG|0){case 0:return{TAG:0,_0:b._0,_1:0};case 1:var c=b._0;if(typeof a==="number")return a;switch(a.TAG|0){case 0:return{TAG:0,_0:a._0,_1:c};case 1:return{TAG:1,_0:c,_1:a._1};case 2:return{TAG:2,_0:c,_1:a._1}}case 2:c=b._0;if(typeof a==="number")return a;switch(a.TAG|0){case 0:return a;case 1:b=a._0;if(c===b)return{TAG:1,_0:b,_1:0};else return{TAG:1,_0:b,_1:c};case 2:b=a._0;if(c===b)return{TAG:1,_0:b,_1:0};else return{TAG:2,_0:b,_1:c}}}}function k(a){if(window.AudioContext!==void 0)return b("bs_caml_option").some(new window.AudioContext());else if(window.webkitAudioContext!==void 0)return b("bs_caml_option").some(new window.webkitAudioContext());else return}function a(a){a=h.useReducer(j,0);var c=a[1],d=a[0],e=b("useIsMountedRef")(),f=h.useRef(void 0),g=h.useRef([]),l=h.useRef([]),m=h.useRef(void 0),n=h.useRef(void 0),o=h.useRef(void 0),p=h.useRef(void 0),q=h.useRef(void 0),r=h.useCallback(function(a){if(!e.current)return;var d=URL.createObjectURL(a);o.current=d;var f=new Audio(d);f.addEventListener("canplay",function(d){n.current=b("bs_caml_option").some(f);d=f.duration;c({TAG:1,_0:d});d={file:a,duration:d};p.current=d;var e=q.current;if(e!==void 0)return b("bs_curry")._1(e,d)});f.addEventListener("timeupdate",function(a){a=n.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a).currentTime;return c({TAG:2,_0:a})});f.addEventListener("durationchange",function(a){a=n.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a).duration;if(!Number.isNaN(a))return c({TAG:1,_0:a})})},[]),s=h.useCallback(function(a){a=f.current;var c=m.current;if(a===void 0)return;if(c===void 0)return;var d=g.current,e=l.current;d={buffersL:d,buffersR:e,sampleRate:a};b("bs_caml_option").valFromOption(c).postMessage(d)},[]),t;t=typeof d==="number"||d.TAG!==0?!1:!0;var u=h.useCallback(function(a){if(!t)return;a=a.inputBuffer;var b=a.getChannelData(0).slice();a=a.getChannelData(1).slice();g.current.push(b);l.current.push(a)},[t]);h.useEffect(function(){if(typeof d==="number")return;if(d.TAG!==0)return;var a=d._0;g.current=[];l.current=[];var c={contents:void 0},e={contents:void 0};e.contents=k(void 0);var h=e.contents;if(h!==void 0){h=b("bs_caml_option").valFromOption(h);var j=h.destination;f.current=h.sampleRate;var n=h.createScriptProcessor(4096,2,2);c.contents=b("bs_caml_option").some(n);h=h.createMediaStreamSource(a);m.current=b("bs_caml_option").some(new(b("WebWorker"))(b("MWChatRecorderUtilsWorkerResource")).setMessageHandler(b("bs_curry").__1(r)).setAllowCrossPageTransition(!0).execute());n.addEventListener("audioprocess",u);h.connect(n);n.connect(j)}i.onReady(function(a){return b("bs_curry")._1(a.logClickStartRecording,void 0)});return function(d){a.getAudioTracks().forEach(function(a){if(a.readyState!=="ended"){a.stop();return}});d=e.contents;d!==void 0&&b("bs_caml_option").valFromOption(d).close();d=c.contents;if(d!==void 0){b("bs_caml_option").valFromOption(d).removeEventListener("audioprocess",u);return}}},[t]);var v=b("usePrevious")(d);h.useEffect(function(){!(v==null)&&typeof v!=="number"&&v.TAG===0&&typeof d!=="number"&&d.TAG===1&&b("bs_curry")._1(s,void 0)},[v,d]);h.useEffect(function(){if(!t)return;var a=Date.now(),d={contents:void 0},e=function e(f){f=(Date.now()-a)/1e3;if(f>=60)return c(1);else{c({TAG:1,_0:f});d.contents=b("bs_caml_option").some(b("setTimeout")(e,1e3));return}};d.contents=b("bs_caml_option").some(b("setTimeout")(e,1e3));return function(a){a=d.contents;if(a!==void 0){b("clearTimeout")(b("bs_caml_option").valFromOption(a));return}}},[t]);a=h.useCallback(function(a){return c({TAG:0,_0:a})},[]);var w=h.useCallback(function(a){c(2);n.current=void 0;p.current=void 0;f.current=void 0;a=o.current;if(a!==void 0){URL.revokeObjectURL(a);o.current=void 0;return}},[]),x=h.useCallback(function(a){var d=n.current;if(d===void 0)return c(0);d=b("bs_caml_option").valFromOption(d);if(typeof a==="number")return c(0);switch(a.TAG|0){case 0:return c(0);case 1:d.play().then(function(a){c(0);return b("Promise").resolve(void 0)})["catch"](function(a){i.onReady(function(a){return b("bs_curry")._1(a.logBrowserDenyAccess,void 0)});return b("Promise").resolve(void 0)});return;case 2:d.pause();return c(0)}},[n]),y=h.useCallback(function(a){return new(b("Promise"))(function(d,c){c=p.current;if(c!==void 0)return d(c);q.current=function(a){return d(a)};if(typeof a==="number"||a.TAG!==0)return;else return b("bs_curry")._1(x,a)})},[]);return{state:d,start:a,reset:w,toggle:x,audioEl:n,getVoiceClip:y}}f.$MWChatAudioLog$Deferred=i;f.useVoiceRecorder=a}),null);
__d("MWV2ComposerView.bs",["CometMessengerComposerInner.react","FBID.bs","LSMediaUrl.bs","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","Locale","MAWGating.bs","MWLSActor.bs","MWPThreadTheme.bs","MWTooltipGroup.react","MWUseAriaDescribedByForComposer.bs","MWV2ChatComposerShareFileCallout.bs","MWV2ChatGrowingHotlikeButton.bs","MWV2ComposerEmojiButton.bs","MWV2ComposerFileButton.bs","MWV2ComposerGifButton.bs","MWV2ComposerMediaStaging.bs","MWV2ComposerPersistentMenuButton.bs","MWV2ComposerPlusButton.bs","MWV2ComposerRoundedCorners.bs","MWV2ComposerSendButton.bs","MWV2ComposerStickerButton.bs","MWV2ComposerVoiceRecorder.bs","MWV2IsTabFocusedContext.bs","MWV2UseVoiceRecorder.bs","Promise","ReQL.bs","ReQLSubscription.bs","ReQLSuspense.bs","ReQLTable","StylexHelpers.bs","UseCurrentDisplayMode.bs","bs_caml","bs_curry","bs_int64","gkx","killswitch","react","requireDeferred","stylex","useCometUniqueID","useCurrentDisplayMode","useDeferredModuleOnReady","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{display:"j83agx80",alignItems:"aovydwv3",paddingTop:"pybr56ya",paddingBottom:"f10w8fjw"},hidden:{display:"mkhogb32"},container:{position:"l9j0dhe7",flexGrow:"buofh1pr",overflowX:"ni8dbmo4",overflowY:"stjgntxs"},button:{position:"pmk7jnqg",bottom:"i09qtzwb",display:"j83agx80",justifyContent:"taijpn5t",alignItems:"bp9cbjyn"},buttonFDS:{marginEnd:"cgat1ltu",marginBottom:"tvmbv18p"},buttonMDS:{marginBottom:"oygrvhab"},buttonHidden:{transform:"qpbg1qsm",transitionProperty:"flx89l3n",transitionDuration:"mb8dcdod"},buttonShown:{transform:"g3zh7qmp",transitionProperty:"flx89l3n",transitionDuration:"mb8dcdod"},fileButtonHidden:{transitionDelay:"lbhrjshz"},stickerButtonHidden:{transitionDelay:"awe8hfj4"},gifButtonHidden:{transitionDelay:"lxbcnve3"},fileButtonShown:{transitionDelay:"lbhrjshz"},stickerButtonShown:{transitionDelay:"tntlmw5q"},gifButtonShown:{transitionDelay:"chkx7lpg"},composer:{flexGrow:"buofh1pr",display:"j83agx80",transitionProperty:"flx89l3n",transitionDuration:"dpja2al7"},emojiButton:{end:"n7fi1qx3"}},k=b("requireDeferred")("getUpgradedCometEmojiComposerHandler").__setRef("MWV2ComposerView.bs");function l(a){var c=b("MWLSActor.bs").useActor(void 0),d=b("useReStore")(),e=b("ReQLSubscription.bs").useArray(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"participants").asc,{hd:a.threadKey,tl:0}),function(a){return[b("ReQLSuspense.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"contacts").asc,{hd:a.contactId,tl:0})),a]})},[d,JSON.stringify(a.threadKey)])),f=i.useMemo(function(){return e.reduce(function(a,d){var e=d[0];if(e!==void 0&&b("bs_caml").i64_neq(e.id,c))return a.concat([[e,d[1]]]);else return a},[])},[e,c]);return i.useMemo(function(){return new Map(f.map(function(a){var c=a[1];a=a[0];var d=c.isAdmin,e=b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.id)),f=a.name,g=a.name;c=c.nickname;var h=b("LSMediaUrl.bs").Contact.profilePictureUrl(a);d=d!==void 0?d:!1;var i=a.workJobTitle,j=a.secondaryName;e={contactId:e,name:f,actualName:g,nickname:c,profileUrl:void 0,profilePictureUrl:h,isContact:!0,isAdmin:d,jobTitle:i,secondaryName:j};return[b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.id)),e]}))},[f])}function m(a){var c=b("useDeferredModuleOnReady")(k);i.useEffect(function(){if(!(c==null))return b("bs_curry")._2(c,a,16)},[a,c])}function a(a){var c=a.thread,d=a.editor,e=a.mediaStaging,f=a.onSendMessage,g=a.onAttachmentsAdded,k=a.onAttachmentRemoved,n=a.supportedFileTypes,o=a.hasStuffToSend,p=a.editorElementRef,q=a.sendMessage;a=a.isSendDisabled;a=a!==void 0?a:!1;var r=b("MWV2IsTabFocusedContext.bs").useContext(void 0),s=b("MWPThreadTheme.bs").useBottom(void 0),t=b("useCurrentDisplayMode")();t=t===b("UseCurrentDisplayMode.bs").darkTheme&&b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType)?"var(--always-white)":s;s=a||!r?void 0:t;var u=b("MWV2UseVoiceRecorder.bs").useVoiceRecorder(void 0);r=u.state!==0;t=function(a){b("bs_curry")._1(u.getVoiceClip,u.state).then(function(a){b("bs_curry")._1(u.reset,void 0);b("bs_curry").app(f,[void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,void 0,void 0]);return b("Promise").resolve(void 0)})};var v=l(c),w=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").mentions,c),x=b("Locale").isRTL(),y=b("MAWGating.bs").isStickerEnabled(void 0)&&b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType),z=!b("gkx")("1787596")&&(b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").sticker,c)||y),A=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").gif,c)&&!b("gkx")("1787594"),B=!b("gkx")("1787595"),C=b("gkx")("571"),D=C?[36,8]:[32,4],E=D[0],F=0+E|0,G=F+E|0,H=x?{right:0..toString()+"px"}:{left:0..toString()+"px"};F=x?{right:F.toString()+"px"}:{left:F.toString()+"px"};var I=x?{right:G.toString()+"px"}:{left:G.toString()+"px"};x={transform:"translateX("+(o?C?8..toString()+"px":"0":(x?"-":"")+((G+E|0)+D[1]|0).toString()+"px")+")"};G=b("MWUseAriaDescribedByForComposer.bs").useHook(c);E=b("useCometUniqueID")();D=b("MWV2ChatComposerShareFileCallout.bs").useHook(c.threadKey,o);m(d);return i.jsxs("div",{className:(h||(h=b("stylex")))(j.root),children:[i.jsx("div",{ref:D[0],children:i.jsx(b("MWV2ComposerPlusButton.bs").make,{thread:c,color:s,onSendMessage:f,onAttachmentsAdded:g,voiceRecorder:u,supportedFileTypes:n,isInputExpanded:o})}),r?i.jsxs(i.Fragment,{children:[i.jsx(b("MWV2ComposerVoiceRecorder.bs").make,{voiceRecorder:u}),i.jsx(b("MWV2ComposerSendButton.bs").make,{color:s,onPress:t,disabled:a})]}):null,i.jsxs("div",{className:h(r?j.hidden:!1,j.container),children:[i.jsxs(b("MWTooltipGroup.react"),{children:[i.jsx("div",{className:h(j.button,C?j.buttonMDS:j.buttonFDS,o?j.buttonHidden:j.buttonShown,o?j.fileButtonHidden:j.fileButtonShown),ref:D[1],style:H,children:i.jsx(b("MWV2ComposerFileButton.bs").make,{color:s,onAttachmentsAdded:g,supportedFileTypes:n,disabled:!B})}),i.jsx("div",{className:h(j.button,C?j.buttonMDS:j.buttonFDS,o?j.buttonHidden:j.buttonShown,o?j.stickerButtonHidden:j.stickerButtonShown),style:F,children:i.jsx(b("MWV2ComposerStickerButton.bs").make,{color:s,onSendMessage:f,disabled:!z,useSecureSend:y})}),i.jsx("div",{className:h(j.button,C?j.buttonMDS:j.buttonFDS,o?j.buttonHidden:j.buttonShown,o?j.gifButtonHidden:j.gifButtonShown),style:I,children:i.jsx(b("MWV2ComposerGifButton.bs").make,{color:s,onSendMessage:f,disabled:!A})})]}),i.jsxs("div",{className:h(j.composer),style:x,children:[i.jsx("div",{id:E,className:h(b("StylexHelpers.bs").styles.visuallyHidden),children:G}),i.jsx(b("CometMessengerComposerInner.react"),{contentEditableRef:p,editor:d,testId:"chat_input:rich-input",topContent:i.jsx(b("MWV2ComposerMediaStaging.bs").make,{thread:c,mediaStaging:e,onAttachmentRemoved:k,onAttachmentsAdded:g,supportedFileTypes:n}),threadID:b("bs_int64").to_string(c.threadKey),participants:v,handlePastedFiles:g,useMentionsPlugin:w&&b("LSMessagingThreadTypeUtil.bs").isGroup(c.threadType),ariaDescribedBy:E})]}),i.jsx("div",{className:h(r?j.hidden:!1,j.button,C?j.buttonMDS:j.buttonFDS,j.emojiButton),children:i.jsx(b("MWV2ComposerEmojiButton.bs").make,{editor:d,color:s})}),r?null:i.jsx(b("MWV2ComposerRoundedCorners.bs").TopRight.make,{}),r?null:i.jsx(b("MWV2ComposerRoundedCorners.bs").BottomRight.make,{})]}),r?null:o?i.jsx(b("MWV2ComposerSendButton.bs").make,{color:s,onPress:function(a){return b("bs_curry")._1(q,void 0)},disabled:a}):c.hasPersistentMenu&&!b("killswitch")("MESSENGER_WEB_PERSISTENT_MENU")?i.jsx(b("MWV2ComposerPersistentMenuButton.bs").make,{thread:c,color:s,onSendMessage:f,disabled:a}):i.jsx(b("MWV2ChatGrowingHotlikeButton.bs").make,{onSendMessage:f,color:s,thread:c,disabled:a})]})}c=a;f.useEmojiTextNodeTransform=m;f.make=c}),null);
__d("MWV2FileDropzone.bs",["fbt","LS.bs","LSIssueNewError","LSTransaction.bs","MDSText.react","bs_caml_option","bs_curry","cometIsMimeTypeForMedia","gkx","promiseDone","react","recoverableViolation","stylex","useFileDragEvents","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=j.createContext(null);function l(a){var b=a.fileUploadHandlerRef;a=a.children;return j.createElement(k.Provider,{value:b,children:a})}c={make:l};var m={root:{flexGrow:"buofh1pr",display:"j83agx80",flexDirection:"cbu4d94t",maxWidth:"d2edcug0",position:"l9j0dhe7",minHeight:"tgvbjcpo"},dropzone:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",position:"pmk7jnqg",bottom:"i09qtzwb",end:"n7fi1qx3",start:"j9ispegn",top:"kr520xx4",backgroundColor:"ms7hmo2b",zIndex:"tkr6xdv7"}};function n(a){if(a==null)return[];a=a.dataTransfer;if(a==null)return[];else return a.types}function o(a,c){var d=c!==0?c!==1?g._(/*FBT_CALL*/"M\u1ed9t s\u1ed1 file kh\u00f4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 v\u00e0 kh\u00f4ng th\u1ec3 chia s\u1ebb trong \u0111o\u1ea1n chat n\u00e0y"/*FBT_CALL*/).toString():g._(/*FBT_CALL*/"\u0110o\u1ea1n chat n\u00e0y kh\u00f4ng h\u1ed7 tr\u1ee3 m\u1ed9t s\u1ed1 lo\u1ea1i file."/*FBT_CALL*/).toString():void 0;if(d===void 0)return;c=b("LSTransaction.bs").run(a,function(a){return b("LSIssueNewError")(void 0,void 0,d,d,b("LS.bs").make(a))},"readWrite");b("promiseDone")(c,void 0,void 0)}function p(a){if(b("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a.type)||b("cometIsMimeTypeForMedia").isMimeTypeForVideo(a.type))return!0;else return a.type.startsWith("audio/")}d=["text/plain","text/html","text/uri-list"];var q=new Set(d);function a(a){var c=a.children,d=a.isMediaOnly;a=a.xstyle;a=a!==void 0?b("bs_caml_option").valFromOption(a):!1;var e=j.useRef(null),f=b("useReStore")(),h=!b("gkx")("1835569"),k=h||e.current==null;h=function(a){var b=e.current;if(b==null)return!1;else return!n(a).some(function(a){return q.has(a)})};h=b("useFileDragEvents")(function(a){return!1},void 0,h);var r=j.useCallback(function(a){var c=e.current;if(c==null)b("recoverableViolation")("Could not find fileUploadHandlerRef to handle dropped file!","messenger_comet");else{a=Array.from(a);var g=d?a.filter(p):a;a.length!==g.length&&o(f,a.length);!k&&g.length!==0&&b("bs_curry")._1(c,g)}},[k,d]),s=j.useRef(null);b("useFileDragEvents")(r,s.current,function(a){return!0});return j.jsxs("div",{className:(i||(i=b("stylex")))(m.root,a),ref:s,children:[j.jsx(l,{fileUploadHandlerRef:e,children:c}),!k&&h?j.jsx("div",{className:(i||(i=b("stylex")))(m.dropzone),children:j.jsx(b("MDSText.react"),{type:"body1",children:g._(/*FBT_CALL*/"Th\u1ea3 t\u1ec7p t\u1ea1i \u0111\u00e2y"/*FBT_CALL*/)})}):null]})}e=a;f.context=k;f.ContextProvider=c;f.styles=m;f.getMediaTypes=n;f.ignoredMediaTypes=d;f.ignoredMediaTypesSet=q;f.make=e}),null);
__d("MWV2OpenMediaStaging.bs",["ReQL.bs","ReQLSubscription.bs","ReQLTable","bs_caml","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")();return b("ReQLSubscription.bs").useArray(h.useMemo(function(){return b("ReQL.bs").filter(b("ReQLTable").table(c,"media_staging").asc,function(c){if(c.isSent)return!1;else return b("bs_caml").i64_eq(c.threadKey,a.threadKey)})},[c,JSON.stringify(a.threadKey)]))}f.useMediaStaging=a}),null);
__d("MWV2OpenTypingState.bs",["LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSMessagingThreadTypeUtil.bs","LSSendTypingIndicator","LSTransaction.bs","MWChatViewerChatVisibilityHook","MWLSActor.bs","MessagingThreadType.bs","Promise","ReQL.bs","ReQLSuspense.bs","ReQLTable","bs_belt_Option","bs_caml","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c,d,e){if(b("bs_caml").i64_eq(d,b("MessagingThreadType.bs").oneToOne)&&b("bs_caml").i64_neq(c,e)){return(d=b("ReQL.bs")).first(d.map(d.filter(d.getKeyRange(b("ReQLTable").table(a,"participants").asc,{hd:c,tl:0}),function(a){return b("bs_caml").i64_neq(a.contactId,e)}),function(c){return b("bs_belt_Option").mapWithDefault(b("ReQLSuspense.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(a,"contacts").asc,{hd:c.contactId,tl:0})),!1,function(a){return b("bs_caml").i64_eq(a.blockedByViewerStatus,b("LSContactBlockedByViewerStatus.bs").unblocked)})})).then(function(a){return b("Promise").resolve(b("bs_belt_Option").getWithDefault(a,!1))})}else return b("Promise").resolve(!0)}function a(a){var c=b("useReStore")(),d=b("MWLSActor.bs").useActor(void 0),e=b("MWChatViewerChatVisibilityHook")();return h.useCallback(function(f){if(!(b("bs_caml").i64_ge(a.authorityLevel,b("LSAuthorityLevel.bs").authoritative)&&e))return;var g=i(c,a.threadKey,a.threadType,d).then(function(d){if(d)return b("LSTransaction.bs").run(c,function(c){return b("LSSendTypingIndicator")(a.threadKey,b("LSMessagingThreadTypeUtil.bs").isGroup(a.threadType),f,b("LS.bs").make(c))},"readWrite");else return b("Promise").resolve(void 0)});b("promiseDone")(g,void 0,void 0)},[c,JSON.stringify(a.authorityLevel),JSON.stringify(a.threadKey),JSON.stringify(a.threadType),e,d])}f.useOnTypingStateChanged=a}),null);
__d("CometInteractionTracingQuickLogModule",[],(function(a,b,c,d,e,f){a=Object.freeze({APP_COLLECTIONS_TAIL_LOAD:30605376,APP_SECTIONS_FEED_TAILLOAD:30605366,BLUE_ON_COMET_MODAL:30605363,BOOKMARK_ITEM:30613596,CHANNEL_TAB_ALL_VIDEOS_CARD_FETCH_MORE:30605391,CHANNEL_TAB_LATEST_VIDEOS_CARD_HSCROLL_LOAD_MORE:30605392,CHANNEL_TAB_PLAYLISTS_CARD_FETCH_MORE:30605390,CHANNEL_TAB_SERIES_CARD_FETCH_MORE:30605389,CHAT_TAB_OPEN:30605380,CHAT_TAB_SEND_MESSAGE:30605384,COLLECTIONS_TAILLOAD:30605367,COMMUNITY_VIEW_DIALOG_OPEN:30614747,COMPOSER_SUBMIT_PROCESSING:30605375,DIALOG_SHOW:30605362,EVENT_RSVP_WWW:30605345,FEED_COMPOSER_DIALOG_OPEN:30605316,FEED_PREFERENCES_DIALOG_OPEN:30605385,GROUP_COMPOSER_DIALOG_OPEN:30605340,GROUP_MALL_FEED_TAILLOAD:30605332,HOMEPAGE_BADGED_NAVIGATION:30632331,HOME_FEED_TAILLOAD:30605313,LWI_SECTION_OPTION_CHANGE:30605381,MARKETPLACE_BUY_LOCATION_DIALOG_OPEN:30605342,MARKETPLACE_COMPOSER_CREATE:30605344,MARKETPLACE_DEALS_FEED_PAGINATION:30605371,MARKETPLACE_ECOMM_PRODUCT_FEED_PAGINATION:30605373,MARKETPLACE_FEED_SAVED_PAGINATION:30605347,MARKETPLACE_HOME_FEED_PAGINATION:30605341,MARKETPLACE_SEARCH_FEED_PAGINATION:30605343,NOTIFICATION_PAGINATION:30605314,PAGE_ABOUT_FACEPILES_SEE_ALL_DIALOG_LOAD:30605358,PAGE_ABOUT_OPEN_MAP_VIEW:30605325,PAGE_ADMIN_SELECT_MANAGED_PAGE:30605324,PAGE_COMMUNITY_FACEPILES_SEE_ALL_DIALOG_LOAD:30605356,PAGE_COMMUNITY_TOP_FANS_CARD_SEE_ALL_DIALOG_LOAD:30605355,PAGE_COMPOSER_DIALOG_OPEN:30605333,PAGE_HOME_CARD_SEE_ALL_DIALOG_LOAD:30605330,PAGE_LIKE:30605317,PAGE_OPEN_VIDEO:30605318,PAGE_PHOTO_TAB_FETCH_MORE:30605331,PAGE_POST_OPEN_DETAILS:30605327,PAGE_REVIEWS_COMPOSER_TRIGGER:30605369,PAGE_REVIEWS_FEED_SORT:30605368,PAGE_REVIEWS_RECOMMENDATION_POST:30605370,PAGE_VIDEO_TAB_FETCH_MORE:30605319,POPOVER_SHOW:30605361,PRIVACY_SELECTOR_DIALOG_LOAD:30605326,PRIVACY_SELECTOR_SAVED_CUSTOM_PAGINATION:30605365,PROFILE_COMPOSER_DIALOG_OPEN:30605360,PROFILE_MENTIONS_FEED_TAILLOAD:30616610,PROFILE_PICTURE_MENU_OPEN:30615365,PROFILE_PIC_EDIT_DIALOG_LOAD_MORE:30605386,PROFILE_PIC_EDIT_DIALOG_OPEN:30605387,PROFILE_PIC_OPEN:30605364,PROFILE_RATINGS_REVIEWS_FEED_TAILLOAD:30617968,PROFILE_SWITCHING_TTI:30618615,PROFILE_TILES_TAILLOAD:30605378,PYMK_FEED_PAGINATION:30618398,REELS_VIEWER_VIDEO_TRANSITION:30612548,SEARCH_TYPEAHEAD:30620813,SEE_MORE_FEED_UNIT:30615438,STORY_VIEWER_BUCKETS_TRANSITION:30613201,STORY_VIEWER_NAV_LIST_LOAD_PAGINATION:30605322,TAHOE_COMMENT_CREATE:30621572,TARGETING_DIALOG_OPEN:30605379,TA_TTRC_COMET:30605354,TIMELINE_FEED_TAILLOAD:30605315,UFI_LOAD_MORE_COMMENTS:30605393,UFI_REACTIONS_DIALOG_OPEN:30605374,VIDEO_HOME_CATALOG_ALL_SHOWS_PAGINATION:30605336,VIDEO_HOME_CATALOG_MORE_FACEBOOK_ORIGINALS_PAGINATION:30605382,VIDEO_HOME_CATALOG_NAV:30605349,VIDEO_HOME_CHANNEL_PAGINATION:30605372,VIDEO_HOME_CONTEXT_MENU_TRIGGER:30605353,VIDEO_HOME_FEED_NAV:30605352,VIDEO_HOME_FEED_PAGINATION:30605334,VIDEO_HOME_LATEST_NAV:30605351,VIDEO_HOME_LATEST_PAGINATION:30605335,VIDEO_HOME_PLAYLIST_VIDEO_LIST_PAGINATION:30605337,VIDEO_HOME_SAVED_NAV:30605350,VIDEO_HOME_SAVED_PAGINATION:30605339,VIDEO_HOME_SETTINGS_TOGGLE:30605346,VIDEO_HOME_SPORTS_HIGHLIGHTS_PAGINATION:30605359,VIDEO_HOME_WATCHLIST_PAGE_NAV:30605348,VIDEO_HOME_WATCHLIST_PAGINATION:30605338});f["default"]=a}),66);
__d("MWLSDefaultThreadSource.bs",["LSThreadAttributionStore.bs","LSThreadAttributionTypeUtil.bs","MWLSThreadDisplayContext.bs","bs_int64","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){a=b("MWLSThreadDisplayContext.bs").useHook(void 0);var c=a!==void 0?a===1?"inboxInThread":a===0?"chatInThread":"unknown":"unknown";return h.useCallback(function(a){return b("LSThreadAttributionTypeUtil.bs").toLSThreadAttribution(b("LSThreadAttributionStore.bs").getSource(c,b("bs_int64").to_string(a)))},[c])}f.useHook=a}),null);
__d("MWV2ComposerMediaUploadUtil.bs",["MessagingAttachmentType.bs","URI","XComposerPhotoUploader","bs_caml","bs_caml_array","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_curry","cometIsMimeTypeForMedia","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d,e,f,h){a=a!==void 0?a:function(a,b){};var i=d!==void 0?d:function(a,b){};d=e!==void 0?e:!1;e=new(b("XComposerPhotoUploader"))({concurrentLimit:3,onUploadFailure:function(a,c){b("bs_curry")._2(i,a,c);return!0},onUploadProgress:b("bs_curry").__2(a),onUploadStart:function(a){},onUploadSuccess:function(a,d){d=b("bs_caml_array").get(d.response.payload.metadata,0);var e=d.fbid,f=d.video_id,g=d.audio_id,h=d.gif_id;d=d.file_id;e=e!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(e)):f!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(f)):g!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(g)):h!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(h)):d!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(d)):void 0;e!==void 0?b("bs_curry")._2(c,a,e):b("unrecoverableViolation")("Unrecognized file upload success payload","messenger_comet")},retryLimit:1,uploadEndpoint:new(g||(g=b("URI")))("/ajax/mercury/upload.php")});a=d?{data:{voice_clip:!0}}:void 0;e.getAsyncFileUploadRequest(f,h,a).send()}function c(a){a=a.type;if(b("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a))return b("MessagingAttachmentType.bs").image;else if(a==="audio/wav")return b("MessagingAttachmentType.bs").audio;else if(a==="image/gif")return b("MessagingAttachmentType.bs").animatedImage;else if(b("cometIsMimeTypeForMedia").isMimeTypeForVideo(a))return b("MessagingAttachmentType.bs").video;else return b("MessagingAttachmentType.bs").file}function d(a,c,d){return{attachment_fbid:a,offline_attachment_id:a,attachment_type:b("MessagingAttachmentType.bs").audio,attachment_index:b("bs_caml_int64").zero,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,playable_url:URL.createObjectURL(c),playable_url_mime_type:c.type,playable_duration_ms:b("bs_caml_int64").of_float(d*1e3),preview_url:void 0,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:void 0,preview_height:void 0,xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0}}function e(a,c){a=a.map(function(a){return{attachment_fbid:a.offlineAttachmentId,offline_attachment_id:a.offlineAttachmentId,attachment_type:a.attachmentType,attachment_index:b("bs_caml_int64").zero,filename:a.filename,filesize:void 0,has_media:!0,has_xma:!1,playable_url:a.previewUrl,playable_url_mime_type:a.mimeType,playable_duration_ms:void 0,preview_url:a.previewUrl,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:[0,200],preview_height:[0,200],xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0}});var d=[],e=[];a.forEach(function(a){b("bs_caml").i64_eq(a.attachment_type,b("MessagingAttachmentType.bs").image)&&!c?e.push(a):d.push([a])});e.length>0&&d.unshift(e);return d.map(function(a){return a.map(function(a,c){a=b("bs_caml_obj").caml_obj_dup(a);a.attachment_index=b("bs_caml_int64").of_int32(c);return a})})}f.startUpload=a;f.getAttachmentType=c;f.getAudioAttachment=d;f.createPartitionedAttachments=e}),null);
__d("MWV2OpenComposerUtils.bs",["LSMailboxType.bs","LSRemoveMediaSendJobs","LSResumeMediaSendJob","LSTransaction.bs","MWConsole","MWV2ComposerMediaUploadUtil.bs","Promise","ReQLTable","bs_caml_int64","bs_caml_option","bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("LSTransaction.bs").run(a,function(a){return b("Promise").all(c.map(function(c){var e=c[0];return b("ReQLTable").table(a,"media_staging").add({offlineAttachmentId:c[1],mailboxType:b("LSMailboxType.bs").messenger,attachmentType:b("MWV2ComposerMediaUploadUtil.bs").getAttachmentType(e),mimeType:e.type,filename:e.name,fileSize:b("bs_caml_int64").of_int32(e.size),fbid:void 0,threadKey:d,offlineThreadingId:void 0,previewUrl:URL.createObjectURL(e),previewWidth:void 0,previewHeight:void 0,durationMs:void 0,progress:0,isSent:!1,hasError:!1})}))},"readWrite")}function c(a,c){return b("ReQLTable").table(a,"media_staging").get({hd:c,tl:0}).then(function(d){if(d!==void 0)return b("ReQLTable").table(a,"media_staging")["delete"]({hd:c,tl:0});else return b("Promise").resolve(void 0)})}function d(a,c,d){return b("ReQLTable").table(a,"media_staging").get({hd:c,tl:0}).then(function(c){if(c!==void 0)return b("ReQLTable").table(a,"media_staging").put(b("bs_curry")._1(d,c));else return b("Promise").resolve(void 0)})}function e(a,c,d,e,f){return b("ReQLTable").table(a,"attachments").get({hd:c,tl:{hd:d,tl:{hd:e,tl:0}}}).then(function(g){if(g!==void 0)return b("ReQLTable").table(a,"attachments").upsert({hd:c,tl:{hd:d,tl:{hd:e,tl:0}}},b("bs_curry")._1(f,g));else return b("Promise").resolve(void 0)})}function g(a,c,d){return b("LSResumeMediaSendJob")(c,b("bs_caml_int64").zero,d!==void 0?b("bs_caml_option").valFromOption(d):void 0,a).then(function(d){d=d[0];if(d)return b("LSRemoveMediaSendJobs")(c,a);else return b("Promise").resolve(void 0)})}f.insertMediaStaging=a;f.deleteMediaStaging=c;f.updateMediaStaging=d;f.updateAttachment=e;f.resumeSendJob=g}),null);
__d("MessagingBackend.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.messengerInfra=a;f.whatsappInfra=c}),null);
__d("SendEventType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.sendAttempt=a;f.sendAcknowledgement=c}),null);
__d("MWV2SendOpenMessage.bs",["FBID.bs","LS.bs","LSAuthorityLevel.bs","LSDict","LSGenerateTraceId.bs","LSInsertNewMediaSend","LSInt64.bs","LSLocalApplyOptimisticMessageWithAttachments","LSMailboxType.bs","LSMarkSubJobCompletedV2","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","LSMessagingInitiatingSourceHook.bs","LSMessagingThreadTypeUtil.bs","LSOptimisticSendMessage","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","LSTransaction.bs","LSUpdateDraftMessage","LSVec.bs","LSWhatsAppConnectStatus.bs","MAWGating.bs","MWConsole","MWLSActor.bs","MWLSDefaultThreadSource.bs","MWLSLogSend.bs","MWV2ComposerMediaUploadUtil.bs","MWV2OpenComposerUtils.bs","MWV2ReplyContext.bs","MWVersion.bs","MessagingBackend.bs","MessagingLoggingUtils.bs","MessagingLoggingUtilsAttachmentTypeInt.bs","MessengerWebEvent","MessengerWebEventsFalcoEvent.bs","OfflineThreadingId.bs","Promise","ReQL.bs","ReQLSubscription.bs","ReQLTable","SendEventType.bs","SortedAsyncIterable.bs","bs_belt_Option","bs_caml","bs_caml_array","bs_caml_format","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","bs_js_json","promiseDone","qpl","react","requireDeferred","useCometInteractionTracing","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("requireDeferred")("MWLogSend.bs").__setRef("MWV2SendOpenMessage.bs");function j(a,c,d,e,f,g,h,k,l){i.onReady(function(i){return b("bs_curry").app(i.log,[a,c,d,f,g,e,h,k,l,b("SendEventType.bs").sendAttempt,b("MessagingBackend.bs").messengerInfra,void 0,void 0,void 0,void 0])})}function k(a,c,d,e,f){if(a===void 0)return;if(!a.startsWith("blob:"))return;var g={contents:function(a){}};g.contents=b("SortedAsyncIterable.bs").subscribe(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"attachments").asc,{hd:e,tl:0}),function(d,e){if(typeof e==="number")return;if(e.TAG===0)return;d=e._0;if(d.attachmentFbid!==c.toString())return;e=d.playableUrl;if(e!==void 0&&!e.startsWith("blob:")){b("bs_curry")._1(g.contents,void 0);URL.revokeObjectURL(a);return}})}function l(a,c,d,e,f,g,h,i,k,l,m,n,o){return b("LSLocalApplyOptimisticMessageWithAttachments")(n,a.threadKey,a.threadType,void 0,void 0,void 0,void 0,b("bs_caml_option").option_get(i!==void 0?i.messageId:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceType.bs").message:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceTypeV2.bs").message:void 0),b("LSVec.bs").make(o.map(function(a){return b("LSDict").fromObject(a)})),d).then(function(c){var d=c[0];return b("ReQLTable").table(e,"messages_optimistic_context").add({taskId:b("bs_caml_format").caml_int64_of_string(d),threadKey:a.threadKey,offlineThreadingId:d,messageId:void 0,threadAttributionSource:g,externalAttachmentUrl:void 0,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,markThreadRead:!1,initiatingSource:h}).then(function(a){return b("Promise").resolve(d)})}).then(function(h){return b("Promise").all(o.map(function(c,g){return b("LSInsertNewMediaSend")(c.attachment_fbid,h,b("bs_caml_int64").of_int32(g),c.attachment_type,!1,!1,!1,!1,d).then(function(g){g=f.find(function(a){return b("bs_caml_obj").caml_equal(a.offlineAttachmentId,c.offline_attachment_id)});if(g!==void 0){var i=g.fbid;if(i!==void 0)return b("LSMarkSubJobCompletedV2")(c.attachment_fbid,i,void 0,void 0,void 0,d).then(function(a){return b("MWV2OpenComposerUtils.bs").deleteMediaStaging(e,c.attachment_fbid)}).then(function(d){return b("MWV2OpenComposerUtils.bs").updateAttachment(e,a.threadKey,h,c.attachment_fbid,function(a){a=b("bs_caml_obj").caml_obj_dup(a);a.attachmentFbid=b("bs_int64").to_string(i);return a})})}k.contents=!1;return b("MWV2OpenComposerUtils.bs").updateMediaStaging(e,c.attachment_fbid,function(a){return{offlineAttachmentId:a.offlineAttachmentId,mailboxType:a.mailboxType,attachmentType:a.attachmentType,mimeType:a.mimeType,filename:a.filename,fileSize:a.fileSize,fbid:a.fbid,threadKey:a.threadKey,offlineThreadingId:a.offlineThreadingId,previewUrl:a.previewUrl,previewWidth:a.previewWidth,previewHeight:a.previewHeight,durationMs:a.durationMs,progress:a.progress,isSent:!0,hasError:a.hasError}})})})).then(function(e){j(c,a.threadKey,a.threadType,n,l,o.map(function(a){return b("LSInt64.bs").ofString(a.attachment_fbid)}),g,m.contents,i!==void 0);return b("MWV2OpenComposerUtils.bs").resumeSendJob(d,h,b("LSGenerateTraceId.bs").make(void 0))})})}function a(a,c){var d=b("useReStore")(),e=b("MWLSActor.bs").useActor(void 0),f=h.useContext(b("MWV2ReplyContext.bs").context),g=f.clearReply,i=f.reply,m=b("LSMessagingInitiatingSourceHook.bs").useHook(void 0),n=b("bs_belt_Option").mapWithDefault(b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"contacts").asc,{hd:a.threadKey,tl:0})},[d,b("bs_js_json").serializeExn(a.threadKey)])),!1,function(a){if(b("bs_caml").i64_eq(a.waConnectStatus,b("LSWhatsAppConnectStatus.bs").whatsappDualSendWebEligible))return!0;else return b("bs_caml").i64_eq(a.waConnectStatus,b("LSWhatsAppConnectStatus.bs").whatsappDualSendXappEligible)}),o=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").splitMultiSendPhoto,a),p=b("useCometInteractionTracing")(b("qpl")._(30605384,"573"),"fast","INTERACTION"),q=b("MWLSDefaultThreadSource.bs").useHook(void 0);return h.useMemo(function(){return function(f,h,r,s,t,u,v,w,x,y,z){return p(function(p){var A=b("bs_curry")._1(q,a.threadKey),B={contents:!0},C=b("LSGenerateTraceId.bs").make(void 0),D={contents:b("MessagingLoggingUtilsAttachmentTypeInt.bs").none},E=b("LSTransaction.bs").run(d,function(c){var g=b("LS.bs").make(c);return b("LSUpdateDraftMessage")(a.threadKey,"",g).then(function(q){if(w===void 0)return b("ReQL.bs").toArray(b("ReQL.bs").filter(b("ReQLTable").table(c,"media_staging").asc,function(c){if(c.isSent)return!1;else return b("bs_caml").i64_eq(c.threadKey,a.threadKey)})).then(function(k){var q=h!==void 0?b("bs_caml_option").some(b("LSDict").fromObject({mention_offsets:h.map(function(a){return String(a.offset)}).join(","),mention_lengths:h.map(function(a){return String(a.length)}).join(","),mention_ids:h.map(function(a){return a.id}).join(","),mention_types:h.length!==0?h.map(function(a){return a.type}).join(","):void 0})):void 0,w=f!==void 0?f.trim()!=="":!1,E=r!==void 0?(D.contents=b("MessagingLoggingUtilsAttachmentTypeInt.bs").sticker,!0):!1,F=u!==void 0?(D.contents=b("MessagingLoggingUtilsAttachmentTypeInt.bs").gif,!0):!1;w=w||E||F?b("LSOptimisticSendMessage")(e,a.threadKey,a.threadType,b("LSMailboxType.bs").messenger,f!==void 0?b("bs_caml_option").valFromOption(f):void 0,void 0,void 0,r!==void 0?b("bs_caml_option").valFromOption(r):void 0,s!==void 0?b("bs_caml_option").valFromOption(s):void 0,u!==void 0?b("bs_caml_option").valFromOption(u):void 0,t!==void 0?b("bs_caml_option").valFromOption(t):void 0,A,void 0,x!==void 0?b("bs_caml_option").valFromOption(x):void 0,b("bs_caml_option").option_get(i!==void 0?i.messageId:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceType.bs").message:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceTypeV2.bs").message:void 0),void 0,q!==void 0?b("bs_caml_option").valFromOption(q):void 0,b("bs_caml").i64_ge(a.authorityLevel,b("LSAuthorityLevel.bs").authoritative),!1,v!==void 0?b("bs_caml_option").valFromOption(v):void 0,m!==void 0?b("bs_caml_option").valFromOption(m):void 0,C!==void 0?b("bs_caml_option").valFromOption(C):void 0,g).then(function(c){b("MWLSLogSend.bs").logSentWithHeroInteraction(p,c[0],m,i!==void 0,b("MWVersion.bs").v2)(b("MAWGating.bs").isDualSendWebOrCrossApp(void 0)&&n&&b("LSMessagingThreadTypeUtil.bs").isOneToOne(a.threadType));return b("Promise").resolve(b("bs_caml_option").some(c))}):b("Promise").resolve(void 0);E=function(a){return a.then(function(a){if(y===void 0)return b("Promise").resolve(void 0);if(a!==void 0){a=b("bs_caml_option").valFromOption(a)[0];b("bs_curry")._1(y,a);return b("Promise").resolve(a)}b("bs_curry")._1(y,void 0);return b("Promise").resolve(void 0)})};if(k.length===0)return E(w).then(function(c){j(d,a.threadKey,a.threadType,e,c,[],A,D.contents,i!==void 0);return b("Promise").resolve(void 0)});F=b("bs_caml_array").get(k,0);D.contents=b("MessagingLoggingUtils.bs").convertToAttachmentType(F.attachmentType);return E(w).then(function(f){return b("MWV2ComposerMediaUploadUtil.bs").createPartitionedAttachments(k,o).reduce(function(b,h){return b.then(function(b){return l(a,d,g,c,k,A,m,i,B,f,D,e,h)})},b("Promise").resolve(void 0)).then(function(c){c=b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.threadKey));c=b("LSMessagingThreadTypeUtil.bs").isGroup(a.threadType)?[c,null]:[null,c];var d=c[1],e=c[0];b("MessengerWebEventsFalcoEvent.bs").log(function(){return{event_name:B.contents?b("MessengerWebEvent").HIT_SEND_MESSAGE_WITH_ALL_FILES_UPLOADED:b("MessengerWebEvent").HIT_SEND_MESSAGE_WITH_FILES_PENDING,other_user_fbid:d,thread_fbid:e,extra_data:null}});return b("Promise").resolve(void 0)})})});q=b("OfflineThreadingId.bs").make(void 0);var E=b("MWV2ComposerMediaUploadUtil.bs").getAudioAttachment(q,w.file,w.duration);return b("LSLocalApplyOptimisticMessageWithAttachments")(e,a.threadKey,a.threadType,void 0,void 0,void 0,void 0,b("bs_caml_option").option_get(i!==void 0?i.messageId:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceType.bs").message:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceTypeV2.bs").message:void 0),b("LSVec.bs").make([b("LSDict").fromObject(E)]),g).then(function(d){var e=d[0];return b("ReQLTable").table(c,"messages_optimistic_context").add({taskId:b("bs_caml_format").caml_int64_of_string(e),threadKey:a.threadKey,offlineThreadingId:e,messageId:void 0,threadAttributionSource:A,externalAttachmentUrl:void 0,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,markThreadRead:!1,initiatingSource:m}).then(function(a){return b("Promise").resolve(e)})}).then(function(a){var c=E.attachment_fbid;return b("LSInsertNewMediaSend")(c,a,b("bs_caml_int64").zero,E.attachment_type,!1,!1,!1,!1,g).then(function(d){return b("Promise").resolve([a,c])})}).then(function(c){var f=c[1],g=c[0];c=function(c,h){b("LSTransaction.bs").run(d,function(c){var e=b("LS.bs").make(c);return b("LSMarkSubJobCompletedV2")(f,b("bs_caml_int64").of_float(h),void 0,void 0,void 0,e).then(function(a){return b("MWV2OpenComposerUtils.bs").resumeSendJob(e,g,C)}).then(function(c){k(E.playable_url,h,d,a.threadKey,void 0);return b("Promise").resolve(void 0)})},"readWrite");return j(d,a.threadKey,a.threadType,e,g,[b("LSInt64.bs").string(b("bs_caml_int64").of_float(h))],A,b("MessagingLoggingUtils.bs").convertToAttachmentType(E.attachment_type),i!==void 0)};b("MWV2ComposerMediaUploadUtil.bs").startUpload(void 0,c,void 0,!0,[w.file],[f]);return b("Promise").resolve(void 0)})})},"readWrite").then(function(d){b("bs_curry")._1(c,void 0);b("bs_curry")._2(g,a.threadKey,!1);return b("Promise").resolve(void 0)});b("promiseDone")(E,void 0,void 0)})}},[b("bs_int64").to_string(a.threadKey),i,g,c,JSON.stringify(a.authorityLevel),m,p])}f.$MWLogSend$Deferred=i;f.logSend=j;f.setupSubscriptionToRevokeObjectURL=k;f.sendAttachmentMessage=l;f.useOnSendOpenMessage=a}),null);
__d("MWV2UseOnAttachmentsAddedOpen.bs",["LS.bs","LSGenerateTraceId.bs","LSMarkSubJobCompletedV2","LSTransaction.bs","MWConsole","MWV2ComposerMediaUploadUtil.bs","MWV2OpenComposerUtils.bs","OfflineThreadingId.bs","Promise","ReQLTable","bs_caml_int64","bs_caml_obj","promiseDone","useReStore"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("useReStore")();return function(d){var e=d.map(function(a){return[a,b("OfflineThreadingId.bs").make(void 0)]});b("promiseDone")(b("MWV2OpenComposerUtils.bs").insertMediaStaging(c,e,a.threadKey),void 0,void 0);var f=function(a,d){d=d.event;if(!d.lengthComputable)return;var e=d.loaded/d.total;b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("MWV2OpenComposerUtils.bs").updateMediaStaging(c,a,function(a){return{offlineAttachmentId:a.offlineAttachmentId,mailboxType:a.mailboxType,attachmentType:a.attachmentType,mimeType:a.mimeType,filename:a.filename,fileSize:a.fileSize,fbid:a.fbid,threadKey:a.threadKey,offlineThreadingId:a.offlineThreadingId,previewUrl:a.previewUrl,previewWidth:a.previewWidth,previewHeight:a.previewHeight,durationMs:a.durationMs,progress:e,isSent:a.isSent,hasError:a.hasError}})},"readWrite"),void 0,void 0)},g=function(d,e){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){var f=b("MWV2OpenComposerUtils.bs").updateMediaStaging(c,d,function(a){return{offlineAttachmentId:a.offlineAttachmentId,mailboxType:a.mailboxType,attachmentType:a.attachmentType,mimeType:a.mimeType,filename:a.filename,fileSize:a.fileSize,fbid:b("bs_caml_int64").of_float(e),threadKey:a.threadKey,offlineThreadingId:a.offlineThreadingId,previewUrl:a.previewUrl,previewWidth:a.previewWidth,previewHeight:a.previewHeight,durationMs:a.durationMs,progress:1,isSent:a.isSent,hasError:a.hasError}}),g=b("ReQLTable").table(c,"media_send_jobs").get({hd:d,tl:0}).then(function(f){if(f===void 0)return b("Promise").resolve(void 0);var g=b("LS.bs").make(c),h=f.offlineThreadingId,i=f.offlineAttachmentId;return b("LSMarkSubJobCompletedV2")(d,b("bs_caml_int64").of_float(e),void 0,void 0,void 0,g).then(function(a){return b("MWV2OpenComposerUtils.bs").deleteMediaStaging(c,d)}).then(function(d){return b("MWV2OpenComposerUtils.bs").updateAttachment(c,a.threadKey,h,i,function(a){a=b("bs_caml_obj").caml_obj_dup(a);a.attachmentFbid=e.toString();return a})}).then(function(a){return b("MWV2OpenComposerUtils.bs").resumeSendJob(g,h,b("LSGenerateTraceId.bs").make(void 0))})});return b("Promise").all([f,g])},"readWrite"),void 0,void 0)},h=function(a,d){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("MWV2OpenComposerUtils.bs").updateMediaStaging(c,a,function(a){return{offlineAttachmentId:a.offlineAttachmentId,mailboxType:a.mailboxType,attachmentType:a.attachmentType,mimeType:a.mimeType,filename:a.filename,fileSize:a.fileSize,fbid:a.fbid,threadKey:a.threadKey,offlineThreadingId:a.offlineThreadingId,previewUrl:a.previewUrl,previewWidth:a.previewWidth,previewHeight:a.previewHeight,durationMs:a.durationMs,progress:a.progress,isSent:a.isSent,hasError:!0}})},"readWrite"),void 0,void 0)};e=e.map(function(a){return a[1]});return b("MWV2ComposerMediaUploadUtil.bs").startUpload(f,g,h,void 0,d,e)}}f.useOnAttachmentsAdded=a}),null);
__d("MWV2UseOnAttachmentsRemovedOpen.bs",["LSTransaction.bs","MWV2OpenComposerUtils.bs","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")();return h.useCallback(function(a){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("MWV2OpenComposerUtils.bs").deleteMediaStaging(c,a)},"readWrite"),void 0,void 0)},[c])}f.useOnAttachmentsRemoved=a}),null);
__d("MWV2OpenComposer.bs",["MWPComposerEditor.bs","MWV2ComposerReplyView.bs","MWV2ComposerView.bs","MWV2FileDropzone.bs","MWV2OpenMediaStaging.bs","MWV2OpenTypingState.bs","MWV2ReplyContext.bs","MWV2SendOpenMessage.bs","MWV2UseOnAttachmentsAddedOpen.bs","MWV2UseOnAttachmentsRemovedOpen.bs","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.forwardRef(function(a,c){var d=a.thread,e=a.isPreviewThread,f=a.afterSendMessage;a=a.onSendEmptyMessage;var g=h.useContext(b("MWV2ReplyContext.bs").context);g=g.reply;var i=b("MWV2UseOnAttachmentsAddedOpen.bs").useOnAttachmentsAdded(d),j=b("MWV2UseOnAttachmentsRemovedOpen.bs").useOnAttachmentsRemoved(void 0),k=b("MWV2SendOpenMessage.bs").useOnSendOpenMessage(d,f);f=b("MWV2OpenTypingState.bs").useOnTypingStateChanged(d);h.useImperativeHandle(c,function(){return b("bs_curry").__1(i)},[i]);var l=b("MWV2OpenMediaStaging.bs").useMediaStaging(d);return h.jsxs("div",{children:[g!==void 0?h.jsx(b("MWV2ComposerReplyView.bs").make,{thread:d,messageId:g.messageId,messageTimestamp:g.timestampMs}):null,h.jsx(b("MWPComposerEditor.bs").make,{thread:d,isPreviewThread:e,mediaStaging:l,onSendMessage:k,onSendEmptyMessage:a,onAttachmentsAdded:i,onAttachmentRemoved:j,onTypingStateChanged:f,children:function(a,c,e,f){return h.jsx(b("MWV2ComposerView.bs").make,{thread:d,editor:a,mediaStaging:l,onSendMessage:k,onAttachmentsAdded:i,onAttachmentRemoved:j,supportedFileTypes:void 0,hasStuffToSend:c,editorElementRef:e,sendMessage:f})}})]})});c={make:i};function j(a){}function a(a){var c=a.thread,d=a.isPreviewThread,e=a.afterSendMessage;a=a.onSendEmptyMessage;e=e!==void 0?e:j;a=a!==void 0?a:j;var f=h.useContext(b("MWV2FileDropzone.bs").context);return h.jsx(i,{thread:c,isPreviewThread:d,afterSendMessage:e,onSendEmptyMessage:a,ref:f})}d=a;f.Inner=c;f.make=d}),null);
__d("MWV2ComposerCommon.bs",["BootloaderResource","CometErrorBoundary.re","CometPlaceholder.react","FBID.bs","JSResource","LSContactBitOffset.bs","LSContactBlockedByViewerStatus.bs","LSContactCapabilityBitOffset.bs","LSContactReachabilityStatusType.bs","LSMessagingThreadTypeUtil.bs","LSNullstateCTAType.bs","LSWhatsAppConnectStatus.bs","MAWGating.bs","MWCMUseFolder.bs","MWChatUnavailableComposer.bs","MWLSActor.bs","MWLSFeatureLimitedStatus.bs","MWLSThreadReportingToken.bs","MWPParticipantsAndContactsForThread.bs","MWV2ComposerDisclosure.bs","MWV2DisabledPageComposer.bs","MWV2ErrorComposer.bs","MWV2OpenComposer.bs","MWV2ThreadIsPage.bs","MessengerThreadCannotReplyReason","ReQL.bs","ReQLSubscription.bs","ReQLTable","RecoverableViolation.react","bs_belt_Option","bs_caml","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_int64","cr:1163","cr:12140","gkx","react","stylex","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("JSResource")("MWChatFeatureLimitsBlockedComposer.bs").__setRef("MWV2ComposerCommon.bs");function a(a){return{}}function k(a){return i.createElement(b("BootloaderResource").read(j).make,a)}a={reasonResource:j,makeProps:a,make:k};var l=b("JSResource")("MWChatLeftGroupComposer.bs").__setRef("MWV2ComposerCommon.bs");function c(a,c){c={};a!==void 0&&(c.thread=b("bs_caml_option").valFromOption(a));return c}function m(a){return i.createElement(b("BootloaderResource").read(l).make,a)}c={reasonResource:l,makeProps:c,make:m};var n=b("JSResource")("MWCMGroupMutedComposer.bs").__setRef("MWV2ComposerCommon.bs");function d(a,c){c={};a!==void 0&&(c.size=b("bs_caml_option").valFromOption(a));return c}function o(a){return i.createElement(b("BootloaderResource").read(n).make,a)}d={reasonResource:n,makeProps:d,make:o};var p=b("JSResource")("MWChatRestrictedComposer.bs").__setRef("MWV2ComposerCommon.bs");function q(a,b,c,d){return{fbid:a,thread:b,threadKey:c}}function r(a){return i.createElement(b("BootloaderResource").read(p).make,a)}var s={reasonResource:p,makeProps:q,make:r},t=b("JSResource")("MWChatBlockedComposer.bs").__setRef("MWV2ComposerCommon.bs");function u(a,c,d,e,f,g){g={fbid:a,thread:c,reportingToken:d};e!==void 0&&(g.size=b("bs_caml_option").valFromOption(e));f!==void 0&&(g.isReachable=b("bs_caml_option").valFromOption(f));return g}function v(a){return i.createElement(b("BootloaderResource").read(t).make,a)}var w={reasonResource:t,makeProps:u,make:v},x={placeholder:{borderTop:"opwvks06"}};function y(a){a=a.height;return i.jsx("div",{className:(h||(h=b("stylex")))(x.placeholder),style:{height:a.toString()+"px"}})}var z={styles:x,make:y};function A(a){var c=a.thread,d=a.isPreviewThread,e=a.afterSendMessage,f=a.onSendEmptyMessage;a=a.areParticipantsDualSendEligible;var g=b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType),h=b("LSMessagingThreadTypeUtil.bs").isOneToOne(c.threadType),j;if(b("cr:12140")==null)j=2;else{if(g)return i.jsx(b("cr:12140").make,{thread:c,isPreviewThread:d,afterSendMessage:e,onSendEmptyMessage:f});j=2}return j===2&&!(b("cr:1163")==null)&&a&&h?i.jsx(b("cr:1163").make,{thread:c,isPreviewThread:d,afterSendMessage:e,onSendEmptyMessage:f}):i.jsx(b("MWV2OpenComposer.bs").make,{thread:c,isPreviewThread:d,afterSendMessage:e,onSendEmptyMessage:f})}var B={make:A};function C(a){var c=a.thread,d=a.afterSendMessage,e=a.onSendEmptyMessage;a=a.isPreviewThread;var f=b("bs_caml_obj").caml_equal(c.cannotReplyReason,b("MessengerThreadCannotReplyReason").VIEWER_NOT_SUBSCRIBED),g=b("MWCMUseFolder.bs").useHook(c);if(g!==void 0){g=g.sendsBlockedUntil;g=g!==void 0?b("bs_caml").i64_neq(g,b("bs_caml_int64").zero):!1}else g=!1;if(f&&b("gkx")("408"))return i.jsx(m,{});else if(g)return i.jsx(o,{size:"small"});else return i.jsx(A,{thread:c,isPreviewThread:a,afterSendMessage:d,onSendEmptyMessage:e,areParticipantsDualSendEligible:!1})}var D={make:C};function E(a){var c=a.thread,d=a.otherUser,e=a.afterSendMessage,f=a.onSendEmptyMessage;a=a.isPreviewThread;var g=b("MWLSThreadReportingToken.bs").fromThread(c),h=b("bs_caml").i64_neq(d.blockedByViewerStatus,b("LSContactBlockedByViewerStatus.bs").unblocked),j=b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").message,d),!0),k=b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").replyMessage,d),!0),l=b("MWV2ThreadIsPage.bs").useIsPage(void 0);l=!l&&(!j||!k);j=d.blockedSinceTimestampMs;k=j!==void 0?!1:l;j=d.contactReachabilityStatusType;l=j!==void 0?b("bs_caml").i64_eq(b("LSContactReachabilityStatusType.bs").reachable,j):!0;j=b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").restrictPlaced,d),!1);if(l)if(h)return i.jsx(b("CometPlaceholder.react"),{children:i.jsx(v,u(b("FBID.bs").ofStringExn(b("bs_int64").to_string(d.id)),c,g,void 0,void 0,void 0)),fallback:i.jsx(y,{height:189})});else if(j)return i.jsx(b("CometPlaceholder.react"),{children:i.jsx(r,q(b("FBID.bs").ofStringExn(b("bs_int64").to_string(d.id)),c,c.threadKey,void 0)),fallback:i.jsx(y,{height:128})});else if(k)return i.jsx(b("MWChatUnavailableComposer.bs").make,{});else return i.jsx(A,{thread:c,isPreviewThread:a,afterSendMessage:e,onSendEmptyMessage:f,areParticipantsDualSendEligible:b("bs_caml").i64_eq(d.waConnectStatus,b("LSWhatsAppConnectStatus.bs").whatsappDualSendWebEligible)||b("bs_caml").i64_eq(d.waConnectStatus,b("LSWhatsAppConnectStatus.bs").whatsappDualSendXappEligible)});else return i.jsx(b("CometPlaceholder.react"),{children:i.jsx(v,u(b("FBID.bs").ofStringExn(b("bs_int64").to_string(d.id)),c,void 0,void 0,!1,void 0)),fallback:i.jsx(y,{height:35})})}var F={make:E};function G(a){var c=a.thread,d=a.isPreviewThread,e=a.afterSendMessage;a=a.onSendEmptyMessage;var f=b("useReStore")(),g=b("MWLSActor.bs").useActor(void 0),h=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(f,"thread_nullstate").asc,{hd:c.threadKey,tl:0})},[f,JSON.stringify(c.threadKey)]));h=h!==void 0?b("bs_caml").i64_eq(h.ctaType,b("LSNullstateCTAType.bs").getStarted):!1;var j=b("bs_caml").i64_neq(c.lastActivityTimestampMs,b("bs_caml_int64").zero),l=b("MWPParticipantsAndContactsForThread.bs").useValue(c),m=b("bs_caml").i64_eq(g,c.threadKey),n=i.useMemo(function(){if(!b("LSMessagingThreadTypeUtil.bs").isOneToOne(c.threadType))return;if(l.length===1){var a=l[0];if(m)return a}return b("bs_caml_option").undefined_to_opt(l.find(function(a){return b("bs_caml").i64_neq(a[1].id,g)}))},[JSON.stringify(g),m,l]),o=b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType);o=b("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited(void 0)&&(!o||b("MAWGating.bs").isFeatureLimitEnabled(void 0));return i.jsxs(i.Fragment,{children:[i.jsx(b("MWV2ComposerDisclosure.bs").make,{thread:c,participantsAndContacts:l}),h&&!j?null:c.disableComposerInput&&c.hasPersistentMenu?i.jsx(b("MWV2DisabledPageComposer.bs").make,{thread:c}):o?i.jsx(k,{}):b("LSMessagingThreadTypeUtil.bs").isOneToOne(c.threadType)?n!==void 0?i.jsx(E,{thread:c,otherUser:n[1],afterSendMessage:e,onSendEmptyMessage:a,isPreviewThread:d}):i.jsx(b("RecoverableViolation.react"),{errorMessage:"Missing contact row",projectName:"messenger_comet"}):i.jsx(C,{thread:c,afterSendMessage:e,onSendEmptyMessage:a,isPreviewThread:d})]})}var H={make:G};function e(a){var c=a.thread,d=a.isPreviewThread,e=a.afterSendMessage;a=a.onSendEmptyMessage;return i.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return i.jsx(b("MWV2ErrorComposer.bs").make,{})},children:i.jsx(b("CometPlaceholder.react"),{children:i.jsx(b("MWV2ThreadIsPage.bs").make,{thread:c,children:i.jsx(G,{thread:c,isPreviewThread:d,afterSendMessage:e,onSendEmptyMessage:a})}),fallback:null})})}e=e;f.MWChatFeatureLimitsBlockedComposerLazy=a;f.MWChatLeftGroupComposerLazy=c;f.MWCMGroupMutedComposerLazy=d;f.MWChatRestrictedComposerLazy=s;f.MWChatBlockedComposerLazy=w;f.Placeholder=z;f.$MAWSecureComposer$requireCondXplat=b("cr:12140");f.$MWV2DualSendComposer$requireCond=b("cr:1163");f.ActualComposer=B;f.GroupComposer=D;f.OneToOneComposer=F;f.Impl=H;f.make=e}),null);
__d("MWV2ChatTabComposer.bs",["LS.bs","LSAddMessengerContact","LSAuthorityLevel.bs","LSMessagingThreadTypeUtil.bs","LSTransaction.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWLSActor.bs","MWV2ComposerCommon.bs","ReQL.bs","ReQLTable","SortedAsyncIterable.bs","bs_caml","bs_curry","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){}function a(a){var c=a.thread,d=a.tab,e=a.isPreviewThread,f=a.secureThreadToggle;a=a.afterSendMessage;var g=f!==void 0?f:!1,j=a!==void 0?a:i,k=b("useReStore")(),l=b("MWChatStateV2.bs").useDispatch(void 0);f=d.tabType;var m;m=f.TAG===0?c.clientThreadKey:f._0.clientThreadKey;var n=b("MWLSActor.bs").useActor(void 0),o=h.useCallback(function(a){a=d.tabType;if(a.TAG===0)return b("bs_curry")._1(l,b("MWChatStateActions.bs").lockInTab(Date.now(),d.tabId,{threadKey:c.threadKey,clientThreadKey:c.clientThreadKey,threadType:c.threadType}))},[d,c]);a=h.useCallback(function(a){if(!b("LSMessagingThreadTypeUtil.bs").isGroup(c.threadType))return b("bs_curry")._1(o,void 0)},[o,c]);f=h.useCallback(function(a){b("bs_curry")._1(j,void 0);b("bs_curry")._1(o,void 0);if(m!==void 0&&b("bs_caml").i64_neq(c.authorityLevel,b("LSAuthorityLevel.bs").authoritative)){var e={contents:function(a){}};e.contents=b("SortedAsyncIterable.bs").subscribe(b("ReQL.bs").getKeyRange(b("ReQLTable").table(k,"threads").index("clientThreadKey").asc,{hd:m,tl:0}),function(a,c){if(typeof c==="number")return;a=c._0;if(b("bs_caml").i64_eq(a.authorityLevel,b("LSAuthorityLevel.bs").authoritative)){b("bs_curry")._1(e.contents,void 0);return b("bs_curry")._1(l,b("MWChatStateActions.bs").updateThreadKeyDescriptor(d.tabId,a.threadKey,a.clientThreadKey))}})}if((b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType)||g)&&b("LSMessagingThreadTypeUtil.bs").isOneToOne(c.threadType)){b("promiseDone")(b("LSTransaction.bs").run(k,function(a){var d;return(d=b("ReQL.bs")).first(d.filter(d.map(d.getKeyRange(b("ReQLTable").table(k,"participants").asc,{hd:c.threadKey,tl:0}),function(a){return a.contactId}),function(a){return b("bs_caml").i64_neq(a,n)})).then(function(c){if(c!==void 0)return b("LSAddMessengerContact")(c,b("LS.bs").make(a))})},"readWrite"),void 0,void 0);return}},[c,d,l,JSON.stringify(m),j,k,n]);return h.jsx(b("MWV2ComposerCommon.bs").make,{thread:c,isPreviewThread:e,afterSendMessage:f,onSendEmptyMessage:a})}c=a;f.noop=i;f.make=c}),null);
__d("MWChatBlockQuote.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.children;return h.jsx("blockquote",{className:"ii04i59q dati1w0a hv4rvrfc tvmbv18p aahdfvyu hcukyx3x cxmmr5t8 peup4ujy mk2mc5f4 lmiizvyk",children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);